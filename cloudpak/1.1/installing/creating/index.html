<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Creating an IBM FHIR Server - IBM FHIR Server</title>
<meta name="description" content="Configure your IBM FHIR Server installation.">

<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM FHIR Server">
<meta property="og:url" content="https://ibm.github.io/FHIR/cloudpak/1.1/installing/creating/" />
<meta property="og:title" content="Documentation | Creating an IBM FHIR Server" />
<meta property="og:description" content="Configure your IBM FHIR Server installation." />

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IBM Event Streams | Creating an IBM FHIR Server" />




  <meta property="og:description" content="Configure your IBM FHIR Server installation.">



  <meta property="og:image" content="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/appIcon_og_fb.png">
  <meta name="twitter:image" content="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/appIcon_og_square.png">



  <meta property="article:published_time" content="2021-09-30T14:11:41-04:00">






<link rel="canonical" href="https://ibm.github.io/FHIR/cloudpak/1.1/installing/creating/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://ibm.github.io/FHIR/cloudpak",
      "logo": "https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/appIcon_og_fb.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "IBM",
      "url": "https://ibm.github.io/FHIR/cloudpak",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/FHIR/cloudpak/feed.xml" type="application/atom+xml" rel="alternate" title="IBM FHIR Server Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/FHIR/cloudpak/assets/css/main.css">



<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="shortcut icon" type="image/png" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/favicon.ico"/>
<link rel="shortcut icon" type="image/png" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/fhir-icon-16.png"/>
<link rel="shortcut icon" type="image/png" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/fhir-icon3.png"/>
<link rel="apple-touch-icon" sizes="180x180" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/fhir-icon3.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/fhir-icon-16.png">
<link rel="manifest" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/site.webmanifest">
<link rel="mask-icon" href="https://ibm.github.io/FHIR/cloudpak/assets/siteMeta/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#000000">

<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600%7CIBM+Plex+Serif:300,400,500%7CIBM+Plex+Mono:300,400,500,700" rel="stylesheet">

<!-- end custom head snippets -->

    <link rel="shortcut icon" type="image/x-icon" href="/FHIR/cloudpak/assets/favicon.ico" >
    
    <base target="_parent">

  </head>
  <script src="/FHIR/cloudpak/assets/animation/lottie.js" type="text/javascript"></script>
  <script src="/FHIR/cloudpak/assets/js/connectors.js"></script>


  
  <body onload="urlChecker()" class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    




 <div id="masthead" class="masthead">
  <div class="masthead__goToIBMCloud">
 <!-- <div>
    You are viewing the documentation for the container-native version of IBM FHIR Server.
  </div> 
   <a class="link" target="_self" href="https://www.ibm.com/products/fhir-server">Looking for the managed service on IBM Cloud? Click here.</a> -->
</div> 
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="mastheadNav">

      


        <div class="mastheadTitle">
          
          <a class="site-title" href="/FHIR/cloudpak/" target="_self"><span>IBM</span>&nbsp;FHIRÂ® Server</a>
          <div class="viewOnIBMcom">
            <a href="https://www.ibm.com/products/fhir-server" target="_blank">View product page</a>
          </div>
        </div>









        <div class="mastheadControls">
            <div class="menuScrollContainer">

        

                <ul id="visible-links" class="visible-links">
                  
                  
                  

                  




                  
                    <li class="masthead__menu-item active" onclick="window.open('https://ibm.github.io/FHIR/cloudpak/','_self')">
                      <a href="https://ibm.github.io/FHIR/cloudpak/" >Documentation</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('https://ibm.github.io/FHIR/cloudpak/support/','_self')">
                      <a href="https://ibm.github.io/FHIR/cloudpak/support/" >Support</a>
                    </li>
                  

                  
                  
                  

                  




                  
                    <li class="masthead__menu-item " onclick="window.open('https://ibm.github.io/FHIR/cloudpak/search/','_self')">
                      <button aria-label="Search Button" role="button" id="searchButton" class="search__toggle " type="button" name="search Button">
                        <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                          <path
                            d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
                            transform="translate(-.01)"></path>
                        </svg>
                      </button>
                    </li>
                  

                  
                </ul>
        

      </div>
    </div>
      </nav>
    </div>
  </div>
</div>


    <div id="initial-content" class="initial-content" role="main">





<main id="main" class="mainContainer" role="main">
    
      <div id="subMenu" class="subMenu">
        <div tabindex="0" class="menuIcon" id="menuIcon">
          <svg id="mobileMenu" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
            <g id="bottomLine">
              <line class="burgerLine" x1="14" y1="29" x2="34" y2="29" />
            </g>
            <g id="middleLine">
              <line class="burgerLine" x1="14" y1="24" x2="34" y2="24" />
            </g>
            <g id="topLine">
              <line class="burgerLine" x1="14" y1="19" x2="34" y2="19" />
            </g>
          </svg>
        </div>
        <div id="mobileVersionShortcut" class="versionContainer" tabindex="0">
          <a id="mobileVersionPillCurrent" class="versionPill">1.1</a>
        </div>
      </div>
    
  


  <div id="sidebarMask" class="sidebarMask">

  </div>
  <div id="sidebar" class="sidebar sticky">
      <div aria-label="Change Version" role="button" aria-expanded="false"
      
        id="versionDropdown"
        tabindex="0"
        class="versionsBar"
       >
          <div class="selectedVersion" id="selectedVersion">
            <div class="versionContainer" >
              
                <a id="versionPillCurrent" class="versionPill">1.1</a>
                <a class="versionChange">Change Version</a>
              
            </div>
          </div>
          


          <div class="allVersions" id="allVersions">
            <ul>

                

                        


                    

                    <!--  -->

                    

                    


                    <li class="version" data-url="https://ibm.github.io/FHIR/cloudpak/installing/creating/" onclick="openVersion('https://ibm.github.io/FHIR/cloudpak/installing/creating/','1.2')">

                        <div class="pillContainer">
                          
                          <a tabindex="-1" href="https://ibm.github.io/FHIR/cloudpak/installing/creating/" class="versionPill inactive">1.2</a>
                        </div>
                        <div class="activeContainer">
                            
                        </div>
                        <div class="latest">
                            Latest
                        </div>
                      </li>

                

                        


                    

                    <!--  -->

                    

                    


                    <li class="version" data-url="https://ibm.github.io/FHIR/cloudpak/1.1/installing/creating/" onclick="openVersion('https://ibm.github.io/FHIR/cloudpak/1.1/installing/creating/','1.1')">

                        <div class="pillContainer">
                          
                          <a tabindex="-1" href="https://ibm.github.io/FHIR/cloudpak/1.1/installing/creating/" class="versionPill active">1.1</a>
                        </div>
                        <div class="activeContainer">
                            
                            <img alt="" src="https://ibm.github.io/FHIR/cloudpak/images/checkbox.svg" />
                            
                        </div>
                        <div class="latest">
                            
                        </div>
                      </li>

                

                        


                    

                    <!--  -->

                    

                    


                    <li class="version" data-url="https://ibm.github.io/FHIR/cloudpak/1.0/installing/creating/" onclick="openVersion('https://ibm.github.io/FHIR/cloudpak/1.0/installing/creating/','1.0')">

                        <div class="pillContainer">
                          
                          <a tabindex="-1" href="https://ibm.github.io/FHIR/cloudpak/1.0/installing/creating/" class="versionPill inactive">1.0</a>
                        </div>
                        <div class="activeContainer">
                            
                        </div>
                        <div class="latest">
                            
                        </div>
                      </li>

                

            </ul>
          </div>
        </div>

  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <ul class="nav__items">

    
      <li>
        
          <span class="nav__sub-title">About</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/about/overview/" class="">Introduction</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/about/whats-new/" class="">What's New</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/about/documentation/" class="">Documentation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/about/license/" class="">License</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing and upgrading</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/prerequisites/" class="">Prerequisites</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/limitations/" class="">Limitations</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/upgrading/" class="">Upgrading</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/installing/" class="">Installing</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/air-gap-installation/" class="">Air Gap Installation</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/creating/" class="active">Creating an IBM FHIR Server</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/tracking-license/" class="">Tracking License Usage</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/installing/uninstalling/" class="">Uninstalling</a>
            </li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/security/security/" class="">Security</a>
            </li>
          
            
            

            
            


      

            

            <li>


          

                    

              <a href="/FHIR/cloudpak/1.1/security/security-context-constraints/" class="">SecurityContextConstraints Requirements</a>
            </li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <div class="mainContent">
    
    <div id="pageContainer" class="page" itemscope itemtype="http://schema.org/CreativeWork">
      <div class="page__inner-wrap  latestVersion">
        
        <section class="page__content pageSpacing" itemprop="text">
          
          <header>
            <h1 id="page-title" class="page__title" itemprop="headline">
              Creating an IBM FHIR Server
</h1>
            
          </header>
          
          <div class="content">
            <h2 id="prerequisites">Prerequisites</h2>

<p>Creating an instance of IBM FHIR Server requires an installed IBM FHIR Server Operator.
See <a href="../installing">Installing</a> for instructions to install the IBM FHIR Server Operator.</p>

<p>Creating an instance of IBM FHIR Server requires at least namespace administration privileges.</p>

<p>If you intend to use CLI commands, ensure you have the following installed:</p>

<ul>
  <li><a href="https://github.com/IBM/cloud-pak-cli">IBM Cloud Pak CLI (cloudctl)</a></li>
  <li><a href="https://docs.openshift.com/container-platform/4.4/cli_reference/openshift_cli/getting-started-cli.html">Red Hat OpenShift Container Platform CLI (oc)</a></li>
</ul>

<h2 id="creating-an-instance">Creating an instance</h2>

<p>Complete the following steps to create an instance of IBM FHIR Server.</p>

<h3 id="1-define-ibm-fhir-server-configuration">1. Define IBM FHIR Server configuration</h3>

<p>Create Secret resource containing IBM FHIR Server configuration.</p>

<ol>
  <li>Define values for the following secret keys:</li>
</ol>

<ul>
  <li>
    <p>IBM_FHIR_SCHEMA_TOOL_INPUT</p>

    <p>The value must be set to the contents of the configuration file for IBM FHIR Server Schema Tool.</p>

    <p>See <a href="#defining-the-schema-tool-input">Defining the schema tool input</a> for configuring the input.</p>

    <p>Put the contents of the configuration file in a file named <code class="language-plaintext highlighter-rouge">persistence.json</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_CONFIG</p>

    <p>The value must be set to the contents of the fhir-server-config.json configuration file for IBM FHIR Server.</p>

    <p>See <a href="https://hub.docker.com/r/ibmcom/ibm-fhir-server">IBM FHIR Server</a> for how to create a fhir-server-config.json configuration file.</p>

    <p>See <a href="#creating-the-configuration">creating the configuration</a> for limitation and examples.</p>

    <p>Put the contents of the configuration file in a file named <code class="language-plaintext highlighter-rouge">fhir-server-config.json</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_DATASOURCE</p>

    <p>The value must be set to the contents of the datasource definition file for IBM FHIR Server.</p>

    <p>See <a href="#creating-the-datasource">creating the datasource</a> for limitation and examples.</p>

    <p>Put the contents of the datasource definition file in a file named <code class="language-plaintext highlighter-rouge">datasource.xml</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_ADMIN_PASSWORD</p>

    <p>The value must be set to the admin password to use for the IBM FHIR Server.</p>

    <p>Put the admin password in a file named <code class="language-plaintext highlighter-rouge">admin.txt</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_USER_PASSWORD</p>

    <p>The value must be set to the user password to use for the IBM FHIR Server.</p>

    <p>Put the user password in a file named <code class="language-plaintext highlighter-rouge">user.txt</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_CERT</p>

    <p>Defining this secret key is optional, but it is needed when using PostgreSQL as the database.</p>

    <p>If defined, the value must be set to the public key of the intermediate CA certificate.</p>

    <p>Put the public key of the intermediate CA certificate in a file named <code class="language-plaintext highlighter-rouge">db.cert</code>.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_HOST</p>

    <p>Defining this secret key is optional.</p>

    <p>If defined, the value must be set to the contents of a configuration file for defining the host.</p>

    <p>Put the contents of the configuration file in a file named <code class="language-plaintext highlighter-rouge">host.xml</code>.</p>

    <p>See <a href="#defining-the-host">Defining the host</a> for how to define the host.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_TRACE_SPEC</p>

    <p>Defining this secret key is optional.</p>

    <p>If defined, the value must be set to the contents of a configuration file for defining the trace level.</p>

    <p>Put the contents of the configuration file in a file named <code class="language-plaintext highlighter-rouge">trace.txt</code>.</p>

    <p>See <a href="#defining-the-trace-specification">defining the trace specification</a> for how to define the timeout.</p>
  </li>
  <li>
    <p>IBM_FHIR_SERVER_TRANSACTION_TIMEOUT</p>

    <p>Defining this secret key is optional.</p>

    <p>If defined, the value must be set to the contents of a configuration file for defining the timeout. You should start with <code class="language-plaintext highlighter-rouge">240s</code></p>

    <p>Put the contents of the configuration file in a file named <code class="language-plaintext highlighter-rouge">timeout.txt</code>.</p>

    <p>See <a href="#defining-the-transaction-timeout">defining the transaction timeout</a> for how to define the timeout.</p>
  </li>
</ul>

<ol>
  <li>Create the secret from the files.</li>
</ol>

<p><em>Note:</em> Any keys that are optional do not need to be created in the secret if they are not needed for the configuration.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ oc create secret generic &lt;secret-name&gt; \
      --from-file=IBM_FHIR_SCHEMA_TOOL_INPUT=./persistence.json \
      --from-file=IBM_FHIR_SERVER_CONFIG=./fhir-server-config.json \
      --from-file=IBM_FHIR_SERVER_DATASOURCE=./datasource.xml \
      --from-file=IBM_FHIR_SERVER_ADMIN_PASSWORD=./admin.txt \
      --from-file=IBM_FHIR_SERVER_USER_PASSWORD=./user.txt \
      --from-file=IBM_FHIR_SERVER_CERT=./db.cert \
      --from-file=IBM_FHIR_SERVER_HOST=./host.xml \
      --from-file=IBM_FHIR_SERVER_TRACE_SPEC=./trace.txt \
      --from-file=IBM_FHIR_SERVER_TRANSACTION_TIMEOUT=./timeout.txt \
      --namespace=&lt;target-namespace&gt;
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;secret-name&gt;</code> is the name of the secret to contain the IBM FHIR Server configuration.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</li>
</ul>

<h3 id="2-create-ibm-fhir-server-instance">2. Create IBM FHIR Server instance</h3>

<p>Create an instance of IBM FHIR Server using one of the following methods:</p>

<h4 id="red-hat-openshift-container-platform-web-console">Red Hat OpenShift Container Platform web console</h4>

<ol>
  <li>
    <p>Log into the OpenShift Container Platform web console using your login credentials.</p>
  </li>
  <li>
    <p>Change the Project to the namespace you want to work with.</p>
  </li>
  <li>
    <p>Navigate to Installed Operators and click on IBM FHIR Server.</p>
  </li>
  <li>
    <p>Click <code class="language-plaintext highlighter-rouge">Create Instance</code> on the <code class="language-plaintext highlighter-rouge">IBMFHIRServer</code> tile.</p>
  </li>
  <li>
    <p>Enter a name for the instance, and enter the name of the Secret resource containing the IBM FHIR Server configuration.</p>
  </li>
  <li>
    <p>Set <code class="language-plaintext highlighter-rouge">License accept</code> to <code class="language-plaintext highlighter-rouge">true</code>.</p>
  </li>
  <li>
    <p>Click <code class="language-plaintext highlighter-rouge">Create</code>.</p>
  </li>
</ol>

<h4 id="red-hat-openshift-container-platform-cli">Red Hat OpenShift Container Platform CLI</h4>

<ol>
  <li>Create an IBMFHIRServer resource in the target namespace by editing secret name and changing license accept to âtrueâ in the sample file, <code class="language-plaintext highlighter-rouge">files/fhirserver_v1beta1_ibmfhirserver.yaml</code>, and then apply the file.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ oc apply -f files/fhirserver_v1beta1_ibmfhirserver.yaml -n &lt;target-namespace&gt;
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</li>
</ul>

<h4 id="ibm-cloud-pak-cli">IBM Cloud Pak CLI</h4>

<ol>
  <li>Run the apply-custom-resources action.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ cloudctl case launch \
      --case case/ibm-fhir-server-case \
      --namespace &lt;target-namespace&gt; \
      --inventory ibmFhirServerOperator \
      --action apply-custom-resources \
      --args "--secretName &lt;secret-name&gt;"
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;secret-name&gt;</code> is the name of the Secret resource containing the IBM FHIR Server configuration.</li>
</ul>

<p>Note, by running this action you accept the <a href="https://ibm.biz/ibm-fhir-server-license">license</a>.</p>

<h3 id="3-accessing-ibm-fhir-server-instance">3. Accessing IBM FHIR Server instance</h3>

<ol>
  <li>Verify the IBM FHIR Server instance is functional.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ oc get ibmfhirservers -n &lt;target-namespace&gt;
</code></pre></div></div>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</p>

    <p>The READY value of âTrueâ indicates the IBM FHIR Server instance is functional. The instance will not be functional if the license was not accepted.</p>
  </li>
</ul>

<ol>
  <li>Connect to the IBM FHIR Server instance.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ oc get services -n &lt;target-namespace&gt;
</code></pre></div></div>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</p>

    <p>To make external connections to the IBM FHIR Server instance, either port-forward or create a route to the service.</p>

    <p>See the <a href="https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide">IBM FHIR Server Userâs Guide</a> for how to verify that itâs running properly by invoking the <code class="language-plaintext highlighter-rouge">$healthcheck</code> endpoint.</p>
  </li>
</ul>

<h2 id="updating-an-instance">Updating an instance</h2>

<h3 id="1-update-ibm-fhir-server-configuration">1. Update IBM FHIR Server configuration</h3>

<p>Create a new Secret with the updated configuration by following the <a href="#1-define-ibm-fhir-server-configuration">Define IBM FHIR Server configuration</a> instructions.</p>

<h3 id="2-update-ibm-fhir-server-instance">2. Update IBM FHIR Server instance</h3>

<p>Update the existing instance of IBM FHIR Server to use the new Secret using one of the following methods:</p>

<h4 id="red-hat-openshift-container-platform-web-console-1">Red Hat OpenShift Container Platform web console</h4>

<ol>
  <li>
    <p>Log into the OpenShift Container Platform web console using your login credentials.</p>
  </li>
  <li>
    <p>Change the Project to the namespace you want to work with.</p>
  </li>
  <li>
    <p>Navigate to Installed Operators and click on IBM FHIR Server.</p>
  </li>
  <li>
    <p>Click the <code class="language-plaintext highlighter-rouge">IBM FHIR Server</code> tab.</p>
  </li>
  <li>
    <p>Click on the instance.</p>
  </li>
  <li>
    <p>Click the <code class="language-plaintext highlighter-rouge">YAML</code> tab.</p>
  </li>
  <li>
    <p>Update the <code class="language-plaintext highlighter-rouge">spec.secretName</code> field with name of the Secret resource containing the IBM FHIR Server configuration.</p>
  </li>
  <li>
    <p>Click <code class="language-plaintext highlighter-rouge">Save</code>.</p>
  </li>
</ol>

<h4 id="red-hat-openshift-container-platform-cli-1">Red Hat OpenShift Container Platform CLI</h4>

<ol>
  <li>Update the IBMFHIRServer resource in the target namespace by editing secret name and changing license accept to âtrueâ in the sample file, <code class="language-plaintext highlighter-rouge">files/fhirserver_v1beta1_ibmfhirserver.yaml</code>, and then apply the file.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ oc apply -f files/fhirserver_v1beta1_ibmfhirserver.yaml -n &lt;target-namespace&gt;
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</li>
</ul>

<h4 id="ibm-cloud-pak-cli-1">IBM Cloud Pak CLI</h4>

<ol>
  <li>Run the apply-custom-resources action.</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ cloudctl case launch \
      --case case/ibm-fhir-server-case \
      --namespace &lt;target-namespace&gt; \
      --inventory ibmFhirServerOperator \
      --action apply-custom-resources \
      --args "--secretName &lt;secret-name&gt;"
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;target-namespace&gt;</code> is the target namespace.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;secret-name&gt;</code> is the name of the Secret resource containing the IBM FHIR Server configuration.</li>
</ul>

<p>Note, by running this action you accept the <a href="https://ibm.biz/ibm-fhir-server-license">license</a>.</p>

<h2 id="scaling">Scaling</h2>

<p>By default, the deployment uses 2 replicas.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">oc scale</code> command to manually scale an IBM FHIR Server deployment.</p>

<h2 id="defining-the-schema-tool-input">Defining the schema tool input</h2>

<p>For the <a href="https://hub.docker.com/r/ibmcom/ibm-fhir-schematool">IBM FHIR Server Schema Tool</a>, the database must be configured with a functional user, which is referred to as FHIRSERVER.</p>

<h3 id="db2">Db2</h3>

<p>The type must be specified as âdb2â, the behavior must be âonboardâ, and the corresponding database settings must be input into the json format. The tenant name must be <code class="language-plaintext highlighter-rouge">default</code>.</p>

<p>Example: persistence.json</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
      </span><span class="nl">"persistence"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="nl">"db"</span><span class="p">:</span><span class="w">  </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.appdomain.cloud"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20010"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bludb"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myuser"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db2"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"ssl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"tenant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-key-here"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"fhir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIRDATA"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"batch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIR_JBATCH"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"oauth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIR_OAUTH"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"grant"</span><span class="p">:</span><span class="w">  </span><span class="s2">"FHIRSERVER"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"behavior"</span><span class="p">:</span><span class="w"> </span><span class="s2">"onboard"</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>For db2, it is recommended that the granted user, and the schemas be configured as uppercase.  Further, the user schema names up to database limited sizes. Whatever is chosen as the schema name must match in the datasource.xml and the fhir-server-config.json. The tenant-key is further used in the fhir-server-config.json to authorize the configurationâs access to the fhir schemaâs data partition.</p>

<h3 id="postgres">Postgres</h3>

<p>The type must be specified as âpostgresqlâ, the behavior must be âonboardâ, and the corresponding database settings must be input into the json format. The certificate must be the base64 encoding of the trusted Certificate Authority of the Database server.</p>

<p>Example: persistence.json</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
      </span><span class="nl">"persistence"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="nl">"db"</span><span class="p">:</span><span class="w">  </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.appdomain.cloud"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13999"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ibmclouddb"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbuser"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgresql"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"ssl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"certificate_base64"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DWHuqdAPsuE67b4FP3mdUYVnY99wjCPm2vYA"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"fhir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIRDATA"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"batch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIR_JBATCH"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"oauth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIR_OAUTH"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"grant"</span><span class="p">:</span><span class="w">  </span><span class="s2">"FHIRSERVER"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"behavior"</span><span class="p">:</span><span class="w"> </span><span class="s2">"onboard"</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>For postgres, it is recommended that the granted user, and the schemas be configured as uppercase.  Further, the user schema names up to database limited sizes. Whatever is chosen as the schema name must match in the datasource.xml and the fhir-server-config.json.</p>

<p>For production usage, the input must be specified as <code class="language-plaintext highlighter-rouge">"ssl": "true"</code>. It is not recommended to not use ssl.</p>

<p>Note, the schema tool does not support Apache Derby. The configuration does not support multiple tenants.</p>

<p>For more detail, see <a href="https://hub.docker.com/r/ibmcom/ibm-fhir-schematool">IBM FHIR Server Schema Tool</a> for how to create a configuration file.</p>

<h2 id="creating-the-configuration">Creating the configuration</h2>

<p>The installer of the IBM FHIR Server must make sure the configuration is a valid IBM FHIR Server json, and a <code class="language-plaintext highlighter-rouge">fhirServer/persistence/datasources</code> entry must be created for postgresql or db2.</p>

<p>The currentSchema must match the <code class="language-plaintext highlighter-rouge">schema/fhir</code> entry in the persistence.json.</p>

<p>For db2, the tenantKey must match the entry in persistence.json.</p>

<p>The hints and searchOptimizerOptions must be specified.</p>

<p>Example: db2</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"datasources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tenantKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-key-here"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentSchema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIRDATA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"search.reopt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ONCE"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Example: postgresql</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"datasources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postgresql"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currentSchema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIRDATA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"searchOptimizerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"from_collapse_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="nl">"join_collapse_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note, the schema tool does not support Apache Derby. The configuration does not support multiple tenants.</p>

<p>Please note that the configuration does not support File,Http with the Bulkdata feature.</p>

<p>To view examples of the IBM FHIR Server fhir-server-config.json, please refer to <a href="https://github.com/IBM/FHIR/tree/4.6.1/fhir-server/liberty-config/config/default">https://github.com/IBM/FHIR/tree/4.6.1/fhir-server/liberty-config/config/default</a>. The documentation of the possible configuration elements are <a href="https://github.com/IBM/FHIR/tree/4.6.1/fhir-server/liberty-config/config/default">https://github.com/IBM/FHIR/tree/4.6.1/fhir-server/liberty-config/config/default</a>.</p>

<h2 id="creating-the-datasource">Creating the datasource</h2>

<p>The datasources must be configured with the <code class="language-plaintext highlighter-rouge">default</code> tenant and <code class="language-plaintext highlighter-rouge">default</code> datastore. The IBM FHIR Server uses the format <code class="language-plaintext highlighter-rouge">jdbc/fhir_</code> and the tenant id and datastore id to look the datasource when executing any FHIR data operation.  The <code class="language-plaintext highlighter-rouge">jdbc/fhirbatchDB</code> is fixed, and must not be changed in order to use the bulk data feature. The configuration must match the configuration defined in the persistence.json secret.</p>

<h3 id="db2-1">Db2</h3>

<p>The following is an example of the db2 datasource to support bulk data and fhir data.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">"fhirDefaultDefault"</span> <span class="na">jndiName=</span><span class="s">"jdbc/fhir_default_default"</span> <span class="na">type=</span><span class="s">"javax.sql.XADataSource"</span> <span class="na">statementCacheSize=</span><span class="s">"200"</span> <span class="na">syncQueryTimeoutWithTransactionTimeout=</span><span class="s">"true"</span> <span class="na">validationTimeout=</span><span class="s">"30s"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;jdbcDriver</span> <span class="na">javax.sql.XADataSource=</span><span class="s">"com.ibm.db2.jcc.DB2XADataSource"</span> <span class="na">libraryRef=</span><span class="s">"sharedLibDb2"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;properties.db2.jcc</span>
              <span class="na">serverName=</span><span class="s">"example.appdomain.cloud"</span>
              <span class="na">portNumber=</span><span class="s">"20010"</span>
              <span class="na">user=</span><span class="s">"fhirserver"</span>
              <span class="na">password=</span><span class="s">"change-password"</span>
              <span class="na">databaseName=</span><span class="s">"FHIRDB"</span>
              <span class="na">currentSchema=</span><span class="s">"FHIRDATA"</span>
              <span class="na">driverType=</span><span class="s">"4"</span>
              <span class="na">sslConnection=</span><span class="s">"true"</span>
          <span class="nt">/&gt;</span>
          <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">"200"</span> <span class="na">minPoolSize=</span><span class="s">"40"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dataSource&gt;</span>
      <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">"fhirbatchDS"</span> <span class="na">jndiName=</span><span class="s">"jdbc/fhirbatchDB"</span> <span class="na">type=</span><span class="s">"javax.sql.XADataSource"</span> <span class="na">statementCacheSize=</span><span class="s">"200"</span> <span class="na">syncQueryTimeoutWithTransactionTimeout=</span><span class="s">"true"</span> <span class="na">validationTimeout=</span><span class="s">"30s"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;jdbcDriver</span> <span class="na">javax.sql.XADataSource=</span><span class="s">"com.ibm.db2.jcc.DB2XADataSource"</span> <span class="na">libraryRef=</span><span class="s">"sharedLibDb2"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;properties.db2.jcc</span>
              <span class="na">serverName=</span><span class="s">"example.appdomain.cloud"</span>
              <span class="na">portNumber=</span><span class="s">"20010"</span>
              <span class="na">user=</span><span class="s">"fhirserver"</span>
              <span class="na">password=</span><span class="s">"change-password"</span>
              <span class="na">databaseName=</span><span class="s">"FHIRDB"</span>
              <span class="na">currentSchema=</span><span class="s">"FHIR_JBATCH"</span>
              <span class="na">driverType=</span><span class="s">"4"</span>
              <span class="na">sslConnection=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dataSource&gt;</span>
  <span class="nt">&lt;/server&gt;</span>
</code></pre></div></div>

<h3 id="postgres-1">Postgres</h3>

<p>The following is an example of the postgres datasource to support bulk data and fhir data.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">"fhirDefaultDefault"</span> <span class="na">jndiName=</span><span class="s">"jdbc/fhir_default_default"</span> <span class="na">type=</span><span class="s">"javax.sql.XADataSource"</span> <span class="na">statementCacheSize=</span><span class="s">"200"</span> <span class="na">syncQueryTimeoutWithTransactionTimeout=</span><span class="s">"true"</span> <span class="na">validationTimeout=</span><span class="s">"30s"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;jdbcDriver</span> <span class="na">javax.sql.XADataSource=</span><span class="s">"org.postgresql.xa.PGXADataSource"</span> <span class="na">libraryRef=</span><span class="s">"sharedLibPostgres"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;properties.postgresql</span>
              <span class="na">serverName=</span><span class="s">"example.appdomain.cloud"</span>
              <span class="na">portNumber=</span><span class="s">"13999"</span>
              <span class="na">databaseName=</span><span class="s">"ibmclouddb"</span>
              <span class="na">user=</span><span class="s">"fhirserver"</span>
              <span class="na">password=</span><span class="s">"change-password"</span>
              <span class="na">currentSchema=</span><span class="s">"fhirdata"</span>
              <span class="na">sslmode=</span><span class="s">"verify-full"</span>
              <span class="na">ssl=</span><span class="s">"true"</span>
              <span class="na">sslrootcert=</span><span class="s">"/opt/ol/wlp/usr/servers/fhir-server/config/default/db.cert"</span>
          <span class="nt">/&gt;</span>
          <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">"200"</span> <span class="na">minPoolSize=</span><span class="s">"40"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dataSource&gt;</span>
      <span class="nt">&lt;dataSource</span> <span class="na">id=</span><span class="s">"fhirbatchDS"</span> <span class="na">jndiName=</span><span class="s">"jdbc/fhirbatchDB"</span> <span class="na">type=</span><span class="s">"javax.sql.XADataSource"</span> <span class="na">statementCacheSize=</span><span class="s">"200"</span> <span class="na">syncQueryTimeoutWithTransactionTimeout=</span><span class="s">"true"</span> <span class="na">validationTimeout=</span><span class="s">"30s"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;jdbcDriver</span> <span class="na">javax.sql.XADataSource=</span><span class="s">"org.postgresql.xa.PGXADataSource"</span> <span class="na">libraryRef=</span><span class="s">"sharedLibPostgres"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;properties.postgresql</span>
              <span class="na">serverName=</span><span class="s">"example.appdomain.cloud"</span>
              <span class="na">portNumber=</span><span class="s">"13999"</span>
              <span class="na">databaseName=</span><span class="s">"ibmclouddb"</span>
              <span class="na">user=</span><span class="s">"fhirserver"</span>
              <span class="na">password=</span><span class="s">"change-password"</span>
              <span class="na">currentSchema=</span><span class="s">"FHIR_JBATCH"</span>
              <span class="na">sslmode=</span><span class="s">"verify-full"</span>
              <span class="na">ssl=</span><span class="s">"true"</span>
              <span class="na">sslrootcert=</span><span class="s">"/opt/ol/wlp/usr/servers/fhir-server/config/default/db.cert"</span>
          <span class="nt">/&gt;</span>
          <span class="nt">&lt;connectionManager</span> <span class="na">maxPoolSize=</span><span class="s">"200"</span> <span class="na">minPoolSize=</span><span class="s">"40"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dataSource&gt;</span>
  <span class="nt">&lt;/server&gt;</span>
</code></pre></div></div>

<p>Note, the schema tool does not support Apache Derby. The configuration does not support multiple tenants and does not support multiple datasources.</p>

<p>Note, the sslrootcert is a fixed path mounted by the IBM FHIR Server Operator.</p>

<p>See <a href="https://hub.docker.com/r/ibmcom/ibm-fhir-server">IBM FHIR Server</a> for how to create a datasource definition file via Liberty configDropin.</p>

<h2 id="defining-the-host">Defining the host</h2>

<p>It is recommended, for security purposes, to explicitly define the hosts for which the IBM FHIR Server will handle requests.</p>

<p>For any Route resources created for the IBM FHIR Server, ensure those hosts (e.g. test-fhir-server) are represented in the configuration file.</p>

<p>For example, the following configuration limits access to 9443 locally on the server, and the incoming route https://my-fhir-server.com. The host should match the host defined in the route.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;server</span> <span class="na">description=</span><span class="s">"fhir-server"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;httpEndpoint</span> <span class="na">host=</span><span class="s">"*"</span> <span class="na">httpPort=</span><span class="s">"-1"</span> <span class="na">httpsPort=</span><span class="s">"9443"</span> <span class="na">id=</span><span class="s">"defaultHttpEndpoint"</span> <span class="na">onError=</span><span class="s">"FAIL"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;virtualHost</span> <span class="na">id=</span><span class="s">"default_host"</span> <span class="na">allowedFromEndpointRef=</span><span class="s">"defaultHttpEndpoint"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;hostAlias&gt;</span>*:9443<span class="nt">&lt;/hostAlias&gt;</span>
      <span class="nt">&lt;hostAlias&gt;</span>my-fhir-server.com:443<span class="nt">&lt;/hostAlias&gt;</span>
    <span class="nt">&lt;/virtualHost&gt;</span>
<span class="nt">&lt;/server&gt;</span>
</code></pre></div></div>

<h2 id="defining-the-trace-specification">Defining the trace specification</h2>

<p>The Trace specification is the WLP specification.</p>

<ul>
  <li>Normal Operation - <code class="language-plaintext highlighter-rouge">*=info</code></li>
  <li>Trace Database access - <code class="language-plaintext highlighter-rouge">*=info:com.ibm.fhir.persistence.jdbc.dao.impl.*=fine</code></li>
  <li>Trace all IBM FHIR Server - <code class="language-plaintext highlighter-rouge">*=info:com.ibm.fhir.*=fine</code></li>
</ul>

<h2 id="defining-the-transaction-timeout">Defining the transaction timeout</h2>

<p>The timeout controls the transaction timeout used when the IBM FHIR Server cluster connects to the user defined database. This value is the maximum time allowed for transactions started on the server to complete. Any transaction must be complete before this timeout, or the transaction is rolled back. Specify a positive integer followed by a unit of time, which can be hours (h), minutes (m), or seconds (s). For example, specify 30 seconds as 30s. You can include multiple values in a single entry. For example, 1m30s is equivalent to 90 seconds. The timeout value should not be smaller than 240 seconds.</p>


          </div>


          
        </section>

        <aside class="sidebar__right ">
          
          <div class="fixedSidebar">
            <nav class="toc">
              <ul class="toc__menu">
  <li><a href="#prerequisites">Prerequisites</a></li>
  <li><a href="#creating-an-instance">Creating an instance</a>
    <ul>
      <li><a href="#1-define-ibm-fhir-server-configuration">1. Define IBM FHIR Server configuration</a></li>
      <li><a href="#2-create-ibm-fhir-server-instance">2. Create IBM FHIR Server instance</a></li>
      <li><a href="#3-accessing-ibm-fhir-server-instance">3. Accessing IBM FHIR Server instance</a></li>
    </ul>
  </li>
  <li><a href="#updating-an-instance">Updating an instance</a>
    <ul>
      <li><a href="#1-update-ibm-fhir-server-configuration">1. Update IBM FHIR Server configuration</a></li>
      <li><a href="#2-update-ibm-fhir-server-instance">2. Update IBM FHIR Server instance</a></li>
    </ul>
  </li>
  <li><a href="#scaling">Scaling</a></li>
  <li><a href="#defining-the-schema-tool-input">Defining the schema tool input</a>
    <ul>
      <li><a href="#db2">Db2</a></li>
      <li><a href="#postgres">Postgres</a></li>
    </ul>
  </li>
  <li><a href="#creating-the-configuration">Creating the configuration</a></li>
  <li><a href="#creating-the-datasource">Creating the datasource</a>
    <ul>
      <li><a href="#db2-1">Db2</a></li>
      <li><a href="#postgres-1">Postgres</a></li>
    </ul>
  </li>
  <li><a href="#defining-the-host">Defining the host</a></li>
  <li><a href="#defining-the-trace-specification">Defining the trace specification</a></li>
  <li><a href="#defining-the-transaction-timeout">Defining the transaction timeout</a></li>
</ul>
            </nav>
          </div>
          
        </aside>


      </div>
      <div class="pageEnd">
        
          
  <nav class="pagination">
    
      <div class="previous" onclick="window.open('/FHIR/cloudpak/1.1/installing/air-gap-installation/','_self')">
        <div class="container">
          <a href="/FHIR/cloudpak/1.1/installing/air-gap-installation/" class="pagination--pager" title="Previous Item: Air Gap Installation
">Previous</a>
          <h2 class="titlePreview">Air Gap Installation
</h2>
        </div>
      </div>
    
    
      <div class="next" onclick="window.open('/FHIR/cloudpak/1.1/installing/tracking-license/','_self')">
        <div class="container">
          <a href="/FHIR/cloudpak/1.1/installing/tracking-license/" class="pagination--pager" title="Next Item: Tracking License Usage
">Next</a>
          <h2 class="titlePreview">Tracking License Usage
</h2>
        </div>
      </div>
      
  </nav>

        
      </div>
    </div>


  </div> <!-- Main content -->

</main></div>


    
      <div class="page__footer">
          <footer>
            <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

            
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;Â© Copyright IBM Corporation 2020, 2021</br>
  Released under the <a href="https://www.apache.org/licenses/LICENSE-2.0" rel="nofollow" target="_blank">Apache License v2.0</a></div>
<p> FHIRÂ® is the registered trademark of HL7 and is used with the permission of HL7. Use of the FHIR trademark does not constitute endorsement of this product by HL7. IBM and the IBM logo are trademarks of International Business Machines
    Corporation, registered in many jurisdictions worldwide. Other product and service names might be trademarks of IBM or other companies. A current list of IBM trademarks is available on <a href="https://www.ibm.com/thought-leadership/trademark/" rel="nofollow" target="_blank">IBM Trademark.</a></p>

          </footer>
      </div>      
    


    
  <script src="/FHIR/cloudpak/assets/js/main.min.js"></script>
  <!-- <script src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script> -->






<script src="/FHIR/cloudpak/assets/js/design.js"></script>





<script src="/FHIR/cloudpak/assets/js/lunr/lunr.min.js"></script>
<script src="/FHIR/cloudpak/assets/js/lunr/lunr-store.js"></script>
<script src="/FHIR/cloudpak/assets/js/lunr/lunr-en.js"></script>





    

    
  </body>
</html>
