<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.16) on Thu Aug 18 12:41:22 UTC 2022 -->
<title>FHIRPersistenceJDBCImpl (LinuxForHealth FHIR Server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-08-18">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FHIRPersistenceJDBCImpl (LinuxForHealth FHIR Server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FHIRPersistenceJDBCImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>LinuxForHealth</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../index.html?org/linuxforhealth/fhir/persistence/jdbc/impl/FHIRPersistenceJDBCImpl.html" target="_top">Frames</a></li>
<li><a href="FHIRPersistenceJDBCImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.linuxforhealth.fhir.persistence.jdbc.impl</a></div>
<h2 title="Class FHIRPersistenceJDBCImpl" class="title">Class FHIRPersistenceJDBCImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.linuxforhealth.fhir.persistence.jdbc.impl.FHIRPersistenceJDBCImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code>, <code><a href="../connection/IFHIRTransactionAdapterCallback.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">IFHIRTransactionAdapterCallback</a></code>, <code><a href="../connection/SchemaNameSupplier.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">SchemaNameSupplier</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">FHIRPersistenceJDBCImpl</span>
extends java.lang.Object
implements <a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a>, <a href="../connection/SchemaNameSupplier.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">SchemaNameSupplier</a>, <a href="../connection/IFHIRTransactionAdapterCallback.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">IFHIRTransactionAdapterCallback</a></pre>
<div class="block">The JDBC implementation of the FHIRPersistence interface,
 providing implementations for CRUD APIs and search.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#TRX_SYNCH_REG_JNDI_NAME">TRX_SYNCH_REG_JNDI_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#TXN_JNDI_NAME">TXN_JNDI_NAME</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.Boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateCreateEnabled">updateCreateEnabled</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected javax.transaction.UserTransaction</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#userTransaction">userTransaction</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.util.Properties,org.linuxforhealth.fhir.database.utils.api.IConnectionProvider,org.linuxforhealth.fhir.config.FHIRConfigProvider,org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache,org.linuxforhealth.fhir.search.util.SearchHelper)">FHIRPersistenceJDBCImpl</a></span>&#8203;(java.util.Properties&nbsp;configProps,
                       <a href="../../../database/utils/api/IConnectionProvider.html" title="interface in org.linuxforhealth.fhir.database.utils.api">IConnectionProvider</a>&nbsp;cp,
                       <a href="../../../config/FHIRConfigProvider.html" title="interface in org.linuxforhealth.fhir.config">FHIRConfigProvider</a>&nbsp;configProvider,
                       <a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache,
                       <a href="../../../search/util/SearchHelper.html" title="class in org.linuxforhealth.fhir.search.util">SearchHelper</a>&nbsp;searchHelper)</code></th>
<td class="colLast">
<div class="block">Constructor for use when running standalone, outside of any web container.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.util.Properties,org.linuxforhealth.fhir.database.utils.api.IConnectionProvider,org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache)">FHIRPersistenceJDBCImpl</a></span>&#8203;(java.util.Properties&nbsp;configProps,
                       <a href="../../../database/utils/api/IConnectionProvider.html" title="interface in org.linuxforhealth.fhir.database.utils.api">IConnectionProvider</a>&nbsp;cp,
                       <a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache)</code></th>
<td class="colLast">
<div class="block">Constructor for use when running standalone, outside of any web container.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache,org.linuxforhealth.fhir.persistence.payload.FHIRPayloadPersistence,org.linuxforhealth.fhir.search.util.SearchHelper)">FHIRPersistenceJDBCImpl</a></span>&#8203;(<a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache,
                       <a href="../../payload/FHIRPayloadPersistence.html" title="interface in org.linuxforhealth.fhir.persistence.payload">FHIRPayloadPersistence</a>&nbsp;payloadPersistence,
                       <a href="../../../search/util/SearchHelper.html" title="class in org.linuxforhealth.fhir.search.util">SearchHelper</a>&nbsp;searchHelper)</code></th>
<td class="colLast">
<div class="block">Constructor for use when running as web application in WLP.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCanonicalCompositeParam(java.util.List)">addCanonicalCompositeParam</a></span>&#8203;(java.util.List&lt;<a href="../dto/ExtractedParameterValue.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">ExtractedParameterValue</a>&gt;&nbsp;allParameters)</code></th>
<td class="colLast">
<div class="block">Augment the given allParameters list with internal parameters that represent the relationship
 between the url and version parameters.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCompartmentParams(java.util.List,java.lang.String,java.lang.String)">addCompartmentParams</a></span>&#8203;(java.util.List&lt;<a href="../dto/ExtractedParameterValue.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">ExtractedParameterValue</a>&gt;&nbsp;allParameters,
                    java.lang.String&nbsp;resourceType,
                    java.lang.String&nbsp;resourceId)</code></th>
<td class="colLast">
<div class="block">Augment the given allParameters list with internal parameters that represent the relationship
 between the fhirResource and its compartments.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#beforeCommit()">beforeCommit</a></span>()</code></th>
<td class="colLast">
<div class="block">Callback invoked just before the current transaction commits</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected <a href="../connection/Action.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">Action</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildActionChain()">buildActionChain</a></span>()</code></th>
<td class="colLast">
<div class="block">Build a chain of actions we want to apply to new connections.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildSortedResourceDTOList(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceDAO,java.lang.Class,java.util.List,boolean)">buildSortedResourceDTOList</a></span>&#8203;(<a href="../dao/api/ResourceDAO.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceDAO</a>&nbsp;resourceDao,
                          java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                          java.util.List&lt;java.lang.Long&gt;&nbsp;sortedIdList,
                          boolean&nbsp;includeResourceData)</code></th>
<td class="colLast">
<div class="block">This method takes the passed list of sorted Resource ids, acquires the ResourceDTO corresponding to each id,
 and returns those ResourceDTOs in a List, sorted according to the input sorted ids.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../ResourceChangeLogRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceChangeLogRecord</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changes(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.time.Instant,java.lang.Long,java.util.List,boolean,org.linuxforhealth.fhir.persistence.HistorySortOrder)">changes</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
       int&nbsp;resourceCount,
       java.time.Instant&nbsp;sinceLastModified,
       java.time.Instant&nbsp;beforeLastModified,
       java.lang.Long&nbsp;changeIdMarker,
       java.util.List&lt;java.lang.String&gt;&nbsp;resourceTypeNames,
       boolean&nbsp;excludeTransactionTimeoutWindow,
       <a href="../../HistorySortOrder.html" title="enum in org.linuxforhealth.fhir.persistence">HistorySortOrder</a>&nbsp;historySortOrder)</code></th>
<td class="colLast">
<div class="block">Fetch up to resourceCount records from the RESOURCE_CHANGE_LOG table.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected &lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br>java.util.List&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#convertResourceDTOList(java.util.List,java.lang.Class)">convertResourceDTOList</a></span>&#8203;(java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;&nbsp;resourceDTOList,
                      java.lang.Class&lt;T&gt;&nbsp;resourceType)</code></th>
<td class="colLast">
<div class="block">Converts the passed Resource Data Transfer Object collection to a collection of FHIR Resource objects.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../../ResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">ResourceResult</a>&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#convertResourceDTOList(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceDAO,java.util.List,java.lang.Class,java.util.List,boolean)">convertResourceDTOList</a></span>&#8203;(<a href="../dao/api/ResourceDAO.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceDAO</a>&nbsp;resourceDao,
                      java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;&nbsp;resourceDTOList,
                      java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                      java.util.List&lt;java.lang.String&gt;&nbsp;elements,
                      boolean&nbsp;includeResourceData)</code></th>
<td class="colLast">
<div class="block">Converts the passed Resource Data Transfer Object collection to a collection of FHIR Resource objects.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br><a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#create(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">create</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
      T&nbsp;updatedResource)</code></th>
<td class="colLast">
<div class="block">Stores a new FHIR Resource in the datastore.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#delete(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,int,org.linuxforhealth.fhir.model.type.Instant)">delete</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
      java.lang.Class&lt;T&gt;&nbsp;resourceType,
      java.lang.String&nbsp;logicalId,
      int&nbsp;versionId,
      <a href="../../../model/type/Instant.html" title="class in org.linuxforhealth.fhir.model.type">Instant</a>&nbsp;lastUpdated)</code></th>
<td class="colLast">
<div class="block">Deletes the FHIR resource from the datastore.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#doCachePrefill(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.sql.Connection)">doCachePrefill</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
              java.sql.Connection&nbsp;connection)</code></th>
<td class="colLast">
<div class="block">Prefill the caches</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../ResourceEraseRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceEraseRecord</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#erase(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.persistence.erase.EraseDTO)">erase</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
     <a href="../../erase/EraseDTO.html" title="class in org.linuxforhealth.fhir.persistence.erase">EraseDTO</a>&nbsp;eraseDto)</code></th>
<td class="colLast">
<div class="block">Erases part or a whole of a resource in the data layer.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../ResourcePayload.html" title="class in org.linuxforhealth.fhir.persistence">ResourcePayload</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fetchResourcePayloads(java.lang.Class,java.time.Instant,java.time.Instant,java.util.function.Function)">fetchResourcePayloads</a></span>&#8203;(java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                     java.time.Instant&nbsp;fromLastModified,
                     java.time.Instant&nbsp;toLastModified,
                     java.util.function.Function&lt;<a href="../../ResourcePayload.html" title="class in org.linuxforhealth.fhir.persistence">ResourcePayload</a>,&#8203;java.lang.Boolean&gt;&nbsp;processor)</code></th>
<td class="colLast">
<div class="block">Special function for high speed export of resource payloads.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateResourceId()">generateResourceId</a></span>()</code></th>
<td class="colLast">
<div class="block">Generates a resource ID.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../model/resource/OperationOutcome.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHealth()">getHealth</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an OperationOutcome indicating the current status of the persistence store / backend.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSchemaForRequestContext(java.sql.Connection)">getSchemaForRequestContext</a></span>&#8203;(java.sql.Connection&nbsp;connection)</code></th>
<td class="colLast">
<div class="block">Get the schema name for the current request context</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="../../FHIRPersistenceTransaction.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistenceTransaction</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTransaction()">getTransaction</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a FHIRPersistenceTransaction object associated with the persistence layer implementation in use.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="../../MultiResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">MultiResourceResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#history(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">history</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
       java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
       java.lang.String&nbsp;logicalId)</code></th>
<td class="colLast">
<div class="block">Retrieves all of the versions of the specified FHIR Resource.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDeleteSupported()">isDeleteSupported</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true iff the persistence layer implementation supports the "delete" operation.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isOffloadingSupported()">isOffloadingSupported</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true iff the persistence layer implementation supports offloading and this has been
 configured for the tenant/datasource.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isReindexSupported()">isReindexSupported</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true iff the persistence layer implementation supports the "reindex" special operation.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isTransactional()">isTransactional</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true iff the persistence layer implementation supports transactions.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isUpdateCreateEnabled()">isUpdateCreateEnabled</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns true iff the persistence layer implementation supports update/create and it has been
 configured in the persistence config.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onCommit(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">onCommit</a></span>&#8203;(java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;records,
        java.util.Collection&lt;<a href="../dao/impl/ResourceReferenceValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceReferenceValueRec</a>&gt;&nbsp;referenceRecords,
        java.util.Collection&lt;<a href="../dao/impl/ResourceProfileRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
        java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
        java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)</code></th>
<td class="colLast">
<div class="block">Called just prior to commit so that we can persist all the token value records
 that have been accumulated during the transaction.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br><a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#read(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">read</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
    java.lang.Class&lt;T&gt;&nbsp;resourceType,
    java.lang.String&nbsp;logicalId)</code></th>
<td class="colLast">
<div class="block">Retrieves the most recent version of a FHIR Resource from the datastore.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readResourcesForRecords(java.util.List)">readResourcesForRecords</a></span>&#8203;(java.util.List&lt;<a href="../../ResourceChangeLogRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceChangeLogRecord</a>&gt;&nbsp;records)</code></th>
<td class="colLast">
<div class="block">Read the resources for each of the change log records in the list, aligning
 the entries in the returned list to match the entries in the records list.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reindex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,java.time.Instant,java.util.List,java.lang.String,boolean)">reindex</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
       <a href="../../../model/resource/OperationOutcome.Builder.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome.Builder</a>&nbsp;operationOutcomeResult,
       java.time.Instant&nbsp;tstamp,
       java.util.List&lt;java.lang.Long&gt;&nbsp;indexIds,
       java.lang.String&nbsp;resourceLogicalId,
       boolean&nbsp;force)</code></th>
<td class="colLast">
<div class="block">Initiates reindexing for either a specified list of index IDs,
 or a randomly chosen resource.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retrieveIndex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.lang.Long,java.lang.String)">retrieveIndex</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
             int&nbsp;count,
             java.time.Instant&nbsp;notModifiedAfter,
             java.lang.Long&nbsp;afterIndexId,
             java.lang.String&nbsp;resourceTypeName)</code></th>
<td class="colLast">
<div class="block">Retrieves a list of index IDs available for reindexing.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>protected javax.transaction.UserTransaction</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retrieveUserTransaction(java.lang.String)">retrieveUserTransaction</a></span>&#8203;(java.lang.String&nbsp;jndiName)</code></th>
<td class="colLast">
<div class="block">Retrieves (via a JNDI lookup) a reference to the UserTransaction.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code><a href="../../MultiResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">MultiResourceResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#search(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class)">search</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
      java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType)</code></th>
<td class="colLast">
<div class="block">Search query implementation based on the 1385 new query builder.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code><a href="../../payload/PayloadPersistenceResponse.html" title="class in org.linuxforhealth.fhir.persistence.payload">PayloadPersistenceResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storePayload(org.linuxforhealth.fhir.model.resource.Resource,java.lang.String,int,java.lang.String)">storePayload</a></span>&#8203;(<a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&nbsp;resource,
            java.lang.String&nbsp;logicalId,
            int&nbsp;newVersionNumber,
            java.lang.String&nbsp;resourcePayloadKey)</code></th>
<td class="colLast">
<div class="block">Offload payload storage to another provider.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br><a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">update</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
      T&nbsp;resource)</code></th>
<td class="colLast">
<div class="block">Updates an existing FHIR Resource by storing a new version in the datastore.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateParameters(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceIndexRecord,java.lang.Class,org.linuxforhealth.fhir.persistence.jdbc.dto.Resource,org.linuxforhealth.fhir.persistence.jdbc.dao.ReindexResourceDAO,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,boolean)">updateParameters</a></span>&#8203;(<a href="../dao/api/ResourceIndexRecord.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceIndexRecord</a>&nbsp;rir,
                java.lang.Class&lt;T&gt;&nbsp;resourceTypeClass,
                <a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&nbsp;existingResourceDTO,
                <a href="../dao/ReindexResourceDAO.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao">ReindexResourceDAO</a>&nbsp;reindexDAO,
                <a href="../../../model/resource/OperationOutcome.Builder.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome.Builder</a>&nbsp;operationOutcomeResult,
                boolean&nbsp;force)</code></th>
<td class="colLast">
<div class="block">Update the parameters for the resource described by the given DTO</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;<br><a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#vread(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,java.lang.String)">vread</a></span>&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
     java.lang.Class&lt;T&gt;&nbsp;resourceType,
     java.lang.String&nbsp;logicalId,
     java.lang.String&nbsp;versionId)</code></th>
<td class="colLast">
<div class="block">Retrieves a specific version of a FHIR Resource from the datastore.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.linuxforhealth.fhir.persistence.FHIRPersistence">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.linuxforhealth.fhir.persistence.<a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></h3>
<code><a href="../../FHIRPersistence.html#isChangesSupported()">isChangesSupported</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="TXN_JNDI_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TXN_JNDI_NAME</h4>
<pre>protected static final&nbsp;java.lang.String TXN_JNDI_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.linuxforhealth.fhir.persistence.jdbc.impl.FHIRPersistenceJDBCImpl.TXN_JNDI_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="TRX_SYNCH_REG_JNDI_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TRX_SYNCH_REG_JNDI_NAME</h4>
<pre>public static final&nbsp;java.lang.String TRX_SYNCH_REG_JNDI_NAME</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.linuxforhealth.fhir.persistence.jdbc.impl.FHIRPersistenceJDBCImpl.TRX_SYNCH_REG_JNDI_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="userTransaction">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>userTransaction</h4>
<pre>protected&nbsp;javax.transaction.UserTransaction userTransaction</pre>
</li>
</ul>
<a id="updateCreateEnabled">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>updateCreateEnabled</h4>
<pre>protected&nbsp;java.lang.Boolean updateCreateEnabled</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache,org.linuxforhealth.fhir.persistence.payload.FHIRPayloadPersistence,org.linuxforhealth.fhir.search.util.SearchHelper)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FHIRPersistenceJDBCImpl</h4>
<pre>public&nbsp;FHIRPersistenceJDBCImpl&#8203;(<a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache,
                               <a href="../../payload/FHIRPayloadPersistence.html" title="interface in org.linuxforhealth.fhir.persistence.payload">FHIRPayloadPersistence</a>&nbsp;payloadPersistence,
                               <a href="../../../search/util/SearchHelper.html" title="class in org.linuxforhealth.fhir.search.util">SearchHelper</a>&nbsp;searchHelper)
                        throws java.lang.Exception</pre>
<div class="block">Constructor for use when running as web application in WLP.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.util.Properties,org.linuxforhealth.fhir.database.utils.api.IConnectionProvider,org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FHIRPersistenceJDBCImpl</h4>
<pre>public&nbsp;FHIRPersistenceJDBCImpl&#8203;(java.util.Properties&nbsp;configProps,
                               <a href="../../../database/utils/api/IConnectionProvider.html" title="interface in org.linuxforhealth.fhir.database.utils.api">IConnectionProvider</a>&nbsp;cp,
                               <a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache)
                        throws java.lang.Exception</pre>
<div class="block">Constructor for use when running standalone, outside of any web container. The
 IConnectionProvider should be a pooling implementation which supports an
 ITransactionProvider. Uses the default adapter for reading FHIR configurations
 and a new SearchHelper instance, which works OK for unit-tests.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>configProps</code> - </dd>
<dd><code>cp</code> - </dd>
<dd><code>cache</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.util.Properties,org.linuxforhealth.fhir.database.utils.api.IConnectionProvider,org.linuxforhealth.fhir.config.FHIRConfigProvider,org.linuxforhealth.fhir.persistence.jdbc.FHIRPersistenceJDBCCache,org.linuxforhealth.fhir.search.util.SearchHelper)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FHIRPersistenceJDBCImpl</h4>
<pre>public&nbsp;FHIRPersistenceJDBCImpl&#8203;(java.util.Properties&nbsp;configProps,
                               <a href="../../../database/utils/api/IConnectionProvider.html" title="interface in org.linuxforhealth.fhir.database.utils.api">IConnectionProvider</a>&nbsp;cp,
                               <a href="../../../config/FHIRConfigProvider.html" title="interface in org.linuxforhealth.fhir.config">FHIRConfigProvider</a>&nbsp;configProvider,
                               <a href="../FHIRPersistenceJDBCCache.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc">FHIRPersistenceJDBCCache</a>&nbsp;cache,
                               <a href="../../../search/util/SearchHelper.html" title="class in org.linuxforhealth.fhir.search.util">SearchHelper</a>&nbsp;searchHelper)
                        throws java.lang.Exception</pre>
<div class="block">Constructor for use when running standalone, outside of any web container. The
 IConnectionProvider should be a pooling implementation which supports an
 ITransactionProvider.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>configProps</code> - </dd>
<dd><code>cp</code> - </dd>
<dd><code>configProvider</code> - adapter to provide access to FHIR configuration</dd>
<dd><code>cache</code> - </dd>
<dd><code>searchHelper</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="buildActionChain()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildActionChain</h4>
<pre class="methodSignature">protected&nbsp;<a href="../connection/Action.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">Action</a>&nbsp;buildActionChain()</pre>
<div class="block">Build a chain of actions we want to apply to new connections. Current the
 only action we need is setting the tenant if we're in multi-tenant mode.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the chain of actions to be applied</dd>
</dl>
</li>
</ul>
<a id="create(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.Resource)">
<!--   -->
</a><a id="create(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;<a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;&nbsp;create&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                           T&nbsp;updatedResource)
                                                    throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#create(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">FHIRPersistence</a></code></span></div>
<div class="block">Stores a new FHIR Resource in the datastore. The resource is not modified before it is stored. It
 must therefore already include correct Meta fields.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#create(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>updatedResource</code> - the FHIR Resource instance to be created in the datastore</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a SingleResourceResult with a ResourceResult that holds the unmodified resource and/or
         an OperationOutcome with hints, warnings, or errors related to the interaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="update(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.Resource)">
<!--   -->
</a><a id="update(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;<a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;&nbsp;update&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                           T&nbsp;resource)
                                                    throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#update(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">FHIRPersistence</a></code></span></div>
<div class="block">Updates an existing FHIR Resource by storing a new version in the datastore.
 This new method expects the resource being passed in to already be modified with correct
 meta and id information. It no longer updates the meta itself.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#update(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,T)">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>resource</code> - the new contents of the FHIR Resource to be stored</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a SingleResourceResult with a ResourceResult that holds a copy of the input resource and/or
         an OperationOutcome with hints, warnings, or errors related to the interaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="search(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre class="methodSignature">public&nbsp;<a href="../../MultiResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">MultiResourceResult</a>&nbsp;search&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                  java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType)
                           throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block">Search query implementation based on the 1385 new query builder.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#search(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class)">search</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - </dd>
<dd><code>resourceType</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="delete(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,int,org.linuxforhealth.fhir.model.type.Instant)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;void&nbsp;delete&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                        java.lang.Class&lt;T&gt;&nbsp;resourceType,
                                        java.lang.String&nbsp;logicalId,
                                        int&nbsp;versionId,
                                        <a href="../../../model/type/Instant.html" title="class in org.linuxforhealth.fhir.model.type">Instant</a>&nbsp;lastUpdated)
                                 throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#delete(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,int,org.linuxforhealth.fhir.model.type.Instant)">FHIRPersistence</a></code></span></div>
<div class="block">Deletes the FHIR resource from the datastore. The delete is a soft-delete, resulting
 in a new version being created to act as a deletion marker. This version is created
 without a payload body. The versionId must match the latest version of the resource.
 This must be checked by the <a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence"><code>FHIRPersistence</code></a> implementation, which should throw a
 FHIRPersistenceVersionIdMismatchException is there is a mismatch (likely an indication
 of concurrent changes to the resource).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#delete(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,int,org.linuxforhealth.fhir.model.type.Instant)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>resourceType</code> - the resource type of the Resource instance to be deleted</dd>
<dd><code>logicalId</code> - the logical id of the Resource instance to be deleted</dd>
<dd><code>versionId</code> - the current version of the Resource instance to be deleted</dd>
<dd><code>lastUpdated</code> - the modification timestamp to use for the deletion</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="read(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;<a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;&nbsp;read&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                         java.lang.Class&lt;T&gt;&nbsp;resourceType,
                                                         java.lang.String&nbsp;logicalId)
                                                  throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#read(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">FHIRPersistence</a></code></span></div>
<div class="block">Retrieves the most recent version of a FHIR Resource from the datastore.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#read(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>resourceType</code> - the resource type of the Resource instance to be retrieved</dd>
<dd><code>logicalId</code> - the logical id of the Resource instance to be retrieved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a SingleResourceResult with a ResourceResult populated from from the datastore and/or
         an OperationOutcome with hints, warnings, or errors related to the interaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="history(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>history</h4>
<pre class="methodSignature">public&nbsp;<a href="../../MultiResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">MultiResourceResult</a>&nbsp;history&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                   java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                                   java.lang.String&nbsp;logicalId)
                            throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#history(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">FHIRPersistence</a></code></span></div>
<div class="block">Retrieves all of the versions of the specified FHIR Resource.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#history(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String)">history</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>resourceType</code> - the resource type of the Resource instances to be retrieved</dd>
<dd><code>logicalId</code> - the logical id of the Resource instances to be retrieved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a MultiResourceResult with a list containing the available versions of the specified FHIR Resource and/or
         an OperationOutcome with hints, warnings, or errors related to the interaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="vread(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>vread</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;<a href="../../SingleResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">SingleResourceResult</a>&lt;T&gt;&nbsp;vread&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                          java.lang.Class&lt;T&gt;&nbsp;resourceType,
                                                          java.lang.String&nbsp;logicalId,
                                                          java.lang.String&nbsp;versionId)
                                                   throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#vread(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,java.lang.String)">FHIRPersistence</a></code></span></div>
<div class="block">Retrieves a specific version of a FHIR Resource from the datastore.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#vread(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.lang.Class,java.lang.String,java.lang.String)">vread</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request</dd>
<dd><code>resourceType</code> - the resource type of the Resource instance to be retrieved</dd>
<dd><code>logicalId</code> - the logical id of the Resource instance to be retrieved</dd>
<dd><code>versionId</code> - the version of the Resource instance to be retrieved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a SingleResourceResult with a ResourceResult populated from the datastore and/or
         an OperationOutcome with hints, warnings, or errors related to the interaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>FHIRPersistenceResourceDeletedException</code> - if the resource being read is currently in a deleted state and
         FHIRPersistenceContext.includeDeleted() is set to false</dd>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="buildSortedResourceDTOList(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceDAO,java.lang.Class,java.util.List,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildSortedResourceDTOList</h4>
<pre class="methodSignature">protected&nbsp;java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;&nbsp;buildSortedResourceDTOList&#8203;(<a href="../dao/api/ResourceDAO.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceDAO</a>&nbsp;resourceDao,
                                                              java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                                                              java.util.List&lt;java.lang.Long&gt;&nbsp;sortedIdList,
                                                              boolean&nbsp;includeResourceData)
                                                       throws <a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a>,
                                                              <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a>,
                                                              java.io.IOException</pre>
<div class="block">This method takes the passed list of sorted Resource ids, acquires the ResourceDTO corresponding to each id,
 and returns those ResourceDTOs in a List, sorted according to the input sorted ids.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceDao</code> - - The resource DAO.</dd>
<dd><code>resourceType</code> - - The type of Resource that each id in the passed list represents.</dd>
<dd><code>sortedIdList</code> - - A list of Resource ids representing the proper sort order for the list of Resources to be returned.</dd>
<dd><code>includeResourceData</code> - include the resource DATA value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List<org.linuxforhealth.fhir.persistence.jdbc.dto.Resource> - A list of ResourcesDTOs of the passed resourceType,
 sorted according the order of ids in the passed sortedIdList.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a></code></dd>
</dl>
</li>
</ul>
<a id="convertResourceDTOList(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceDAO,java.util.List,java.lang.Class,java.util.List,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertResourceDTOList</h4>
<pre class="methodSignature">protected&nbsp;java.util.List&lt;<a href="../../ResourceResult.html" title="class in org.linuxforhealth.fhir.persistence">ResourceResult</a>&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&gt;&nbsp;convertResourceDTOList&#8203;(<a href="../dao/api/ResourceDAO.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceDAO</a>&nbsp;resourceDao,
                                                                                    java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;&nbsp;resourceDTOList,
                                                                                    java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                                                                                    java.util.List&lt;java.lang.String&gt;&nbsp;elements,
                                                                                    boolean&nbsp;includeResourceData)
                                                                             throws <a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a>,
                                                                                    java.io.IOException</pre>
<div class="block">Converts the passed Resource Data Transfer Object collection to a collection of FHIR Resource objects.
 Note that if the resource has been erased or was not fetched on purpose, ResourceResult.resource
 will be null and the caller will need to take this into account</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceDao</code> - </dd>
<dd><code>resourceDTOList</code> - </dd>
<dd><code>resourceType</code> - </dd>
<dd><code>elements</code> - </dd>
<dd><code>includeResourceData</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="addCompartmentParams(java.util.List,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCompartmentParams</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addCompartmentParams&#8203;(java.util.List&lt;<a href="../dto/ExtractedParameterValue.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">ExtractedParameterValue</a>&gt;&nbsp;allParameters,
                                    java.lang.String&nbsp;resourceType,
                                    java.lang.String&nbsp;resourceId)</pre>
<div class="block">Augment the given allParameters list with internal parameters that represent the relationship
 between the fhirResource and its compartments. These parameter values are subsequently used
 to improve the performance of compartment-based FHIR search queries. See
 <a href="../../../search/compartment/CompartmentHelper.html#makeCompartmentParamName(java.lang.String)"><code>CompartmentHelper.makeCompartmentParamName(String)</code></a> for details on how the
 parameter name is composed for each relationship.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allParameters</code> - </dd>
<dd><code>resourceType</code> - the resource type of the resource we are extracting parameter values from</dd>
<dd><code>resourceId</code> - the resource id of the resource we are extracting parameter values from</dd>
</dl>
</li>
</ul>
<a id="addCanonicalCompositeParam(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCanonicalCompositeParam</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addCanonicalCompositeParam&#8203;(java.util.List&lt;<a href="../dto/ExtractedParameterValue.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">ExtractedParameterValue</a>&gt;&nbsp;allParameters)
                                   throws <a href="../../../search/exception/FHIRSearchException.html" title="class in org.linuxforhealth.fhir.search.exception">FHIRSearchException</a></pre>
<div class="block">Augment the given allParameters list with internal parameters that represent the relationship
 between the url and version parameters. These parameter values are subsequently used in
 canonical reference searches. See <a href="../../../search/compartment/CompartmentHelper.html#makeCompartmentParamName(java.lang.String)"><code>CompartmentHelper.makeCompartmentParamName(String)</code></a> for
 details on how the parameter name is composed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allParameters</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../search/exception/FHIRSearchException.html" title="class in org.linuxforhealth.fhir.search.exception">FHIRSearchException</a></code></dd>
</dl>
</li>
</ul>
<a id="getHealth()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHealth</h4>
<pre class="methodSignature">public&nbsp;<a href="../../../model/resource/OperationOutcome.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome</a>&nbsp;getHealth()
                           throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#getHealth()">FHIRPersistence</a></code></span></div>
<div class="block">Returns an OperationOutcome indicating the current status of the persistence store / backend.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#getHealth()">getHealth</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An OperationOutcome with a list of 0 or more OperationalOutcomeIssue indicating the status of the underlying datastore</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="retrieveUserTransaction(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveUserTransaction</h4>
<pre class="methodSignature">protected&nbsp;javax.transaction.UserTransaction&nbsp;retrieveUserTransaction&#8203;(java.lang.String&nbsp;jndiName)</pre>
<div class="block">Retrieves (via a JNDI lookup) a reference to the UserTransaction. If the JNDI lookup fails, we'll assume that
 we're not running inside the container.</div>
</li>
</ul>
<a id="convertResourceDTOList(java.util.List,java.lang.Class)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convertResourceDTOList</h4>
<pre class="methodSignature">protected&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;java.util.List&lt;T&gt;&nbsp;convertResourceDTOList&#8203;(java.util.List&lt;<a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&gt;&nbsp;resourceDTOList,
                                                                        java.lang.Class&lt;T&gt;&nbsp;resourceType)
                                                                 throws <a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a>,
                                                                        java.io.IOException</pre>
<div class="block">Converts the passed Resource Data Transfer Object collection to a collection of FHIR Resource objects.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceDTOList</code> - </dd>
<dd><code>resourceType</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../exception/FHIRException.html" title="class in org.linuxforhealth.fhir.exception">FHIRException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="isTransactional()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransactional</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isTransactional()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#isTransactional()">FHIRPersistence</a></code></span></div>
<div class="block">Returns true iff the persistence layer implementation supports transactions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#isTransactional()">isTransactional</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
</dl>
</li>
</ul>
<a id="getTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransaction</h4>
<pre class="methodSignature">public&nbsp;<a href="../../FHIRPersistenceTransaction.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistenceTransaction</a>&nbsp;getTransaction()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#getTransaction()">FHIRPersistence</a></code></span></div>
<div class="block">Returns a FHIRPersistenceTransaction object associated with the persistence layer implementation in use.
 This can then be used to control transactional boundaries.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#getTransaction()">getTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="isDeleteSupported()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDeleteSupported</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isDeleteSupported()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#isDeleteSupported()">FHIRPersistence</a></code></span></div>
<div class="block">Returns true iff the persistence layer implementation supports the "delete" operation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#isDeleteSupported()">isDeleteSupported</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="getSchemaForRequestContext(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSchemaForRequestContext</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getSchemaForRequestContext&#8203;(java.sql.Connection&nbsp;connection)
                                            throws <a href="../exception/FHIRPersistenceDBConnectException.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../connection/SchemaNameSupplier.html#getSchemaForRequestContext(java.sql.Connection)">SchemaNameSupplier</a></code></span></div>
<div class="block">Get the schema name for the current request context</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../connection/SchemaNameSupplier.html#getSchemaForRequestContext(java.sql.Connection)">getSchemaForRequestContext</a></code>&nbsp;in interface&nbsp;<code><a href="../connection/SchemaNameSupplier.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">SchemaNameSupplier</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>connection</code> - the connection for which we want to obtain the schema name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the main schema name to use for the given connection</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/FHIRPersistenceDBConnectException.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.exception">FHIRPersistenceDBConnectException</a></code></dd>
</dl>
</li>
</ul>
<a id="doCachePrefill(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCachePrefill</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;doCachePrefill&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                           java.sql.Connection&nbsp;connection)
                    throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block">Prefill the caches</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="isReindexSupported()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReindexSupported</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isReindexSupported()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#isReindexSupported()">FHIRPersistence</a></code></span></div>
<div class="block">Returns true iff the persistence layer implementation supports the "reindex" special operation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#isReindexSupported()">isReindexSupported</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="isOffloadingSupported()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOffloadingSupported</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isOffloadingSupported()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#isOffloadingSupported()">FHIRPersistence</a></code></span></div>
<div class="block">Returns true iff the persistence layer implementation supports offloading and this has been
 configured for the tenant/datasource.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#isOffloadingSupported()">isOffloadingSupported</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="reindex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,java.time.Instant,java.util.List,java.lang.String,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reindex</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;reindex&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                   <a href="../../../model/resource/OperationOutcome.Builder.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome.Builder</a>&nbsp;operationOutcomeResult,
                   java.time.Instant&nbsp;tstamp,
                   java.util.List&lt;java.lang.Long&gt;&nbsp;indexIds,
                   java.lang.String&nbsp;resourceLogicalId,
                   boolean&nbsp;force)
            throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#reindex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,java.time.Instant,java.util.List,java.lang.String,boolean)">FHIRPersistence</a></code></span></div>
<div class="block">Initiates reindexing for either a specified list of index IDs,
 or a randomly chosen resource. The number of resources processed is returned.
 This can be used by a controller to continue processing until everything is complete.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#reindex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,java.time.Instant,java.util.List,java.lang.String,boolean)">reindex</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext instance associated with the current request.</dd>
<dd><code>operationOutcomeResult</code> - accumulate issues in this <a href="../../../model/resource/OperationOutcome.Builder.html" title="class in org.linuxforhealth.fhir.model.resource"><code>OperationOutcome.Builder</code></a></dd>
<dd><code>tstamp</code> - only reindex resources with a reindex_tstamp less than this</dd>
<dd><code>indexIds</code> - list of index IDs of resources to reindex, or null</dd>
<dd><code>resourceLogicalId</code> - resourceType/logicalId value of a specific resource to reindex, or null;
 this parameter is ignored if the indexIds parameter value is non-null</dd>
<dd><code>force</code> - if true, always replace the stored parameters</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>count of the number of resources reindexed by this call</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="updateParameters(org.linuxforhealth.fhir.persistence.jdbc.dao.api.ResourceIndexRecord,java.lang.Class,org.linuxforhealth.fhir.persistence.jdbc.dto.Resource,org.linuxforhealth.fhir.persistence.jdbc.dao.ReindexResourceDAO,org.linuxforhealth.fhir.model.resource.OperationOutcome.Builder,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateParameters</h4>
<pre class="methodSignature">public&nbsp;&lt;T extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;void&nbsp;updateParameters&#8203;(<a href="../dao/api/ResourceIndexRecord.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.api">ResourceIndexRecord</a>&nbsp;rir,
                                                  java.lang.Class&lt;T&gt;&nbsp;resourceTypeClass,
                                                  <a href="../dto/Resource.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dto">Resource</a>&nbsp;existingResourceDTO,
                                                  <a href="../dao/ReindexResourceDAO.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao">ReindexResourceDAO</a>&nbsp;reindexDAO,
                                                  <a href="../../../model/resource/OperationOutcome.Builder.html" title="class in org.linuxforhealth.fhir.model.resource">OperationOutcome.Builder</a>&nbsp;operationOutcomeResult,
                                                  boolean&nbsp;force)
                                           throws java.lang.Exception</pre>
<div class="block">Update the parameters for the resource described by the given DTO</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - </dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rir</code> - the resource index record</dd>
<dd><code>resourceTypeClass</code> - the resource type class</dd>
<dd><code>existingResourceDTO</code> - the existing resource DTO</dd>
<dd><code>reindexDAO</code> - the reindex resource DAO</dd>
<dd><code>operationOutcomeResult</code> - the operation outcome result</dd>
<dd><code>force</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="generateResourceId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateResourceId</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;generateResourceId()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#generateResourceId()">FHIRPersistence</a></code></span></div>
<div class="block">Generates a resource ID.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#generateResourceId()">generateResourceId</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>resource ID</dd>
</dl>
</li>
</ul>
<a id="beforeCommit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeCommit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;beforeCommit()
                  throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../connection/IFHIRTransactionAdapterCallback.html#beforeCommit()">IFHIRTransactionAdapterCallback</a></code></span></div>
<div class="block">Callback invoked just before the current transaction commits</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../connection/IFHIRTransactionAdapterCallback.html#beforeCommit()">beforeCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../connection/IFHIRTransactionAdapterCallback.html" title="interface in org.linuxforhealth.fhir.persistence.jdbc.connection">IFHIRTransactionAdapterCallback</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="onCommit(java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCommit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;onCommit&#8203;(java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;records,
                     java.util.Collection&lt;<a href="../dao/impl/ResourceReferenceValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceReferenceValueRec</a>&gt;&nbsp;referenceRecords,
                     java.util.Collection&lt;<a href="../dao/impl/ResourceProfileRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceProfileRec</a>&gt;&nbsp;profileRecs,
                     java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;tagRecs,
                     java.util.Collection&lt;<a href="../dao/impl/ResourceTokenValueRec.html" title="class in org.linuxforhealth.fhir.persistence.jdbc.dao.impl">ResourceTokenValueRec</a>&gt;&nbsp;securityRecs)
              throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block">Called just prior to commit so that we can persist all the token value records
 that have been accumulated during the transaction. This collection therefore
 contains multiple resource types, which have to be processed separately.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>records</code> - </dd>
<dd><code>referenceRecords</code> - </dd>
<dd><code>profileRecs</code> - </dd>
<dd><code>tagRecs</code> - </dd>
<dd><code>securityRecs</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="fetchResourcePayloads(java.lang.Class,java.time.Instant,java.time.Instant,java.util.function.Function)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchResourcePayloads</h4>
<pre class="methodSignature">public&nbsp;<a href="../../ResourcePayload.html" title="class in org.linuxforhealth.fhir.persistence">ResourcePayload</a>&nbsp;fetchResourcePayloads&#8203;(java.lang.Class&lt;? extends <a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;resourceType,
                                             java.time.Instant&nbsp;fromLastModified,
                                             java.time.Instant&nbsp;toLastModified,
                                             java.util.function.Function&lt;<a href="../../ResourcePayload.html" title="class in org.linuxforhealth.fhir.persistence">ResourcePayload</a>,&#8203;java.lang.Boolean&gt;&nbsp;processor)
                                      throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#fetchResourcePayloads(java.lang.Class,java.time.Instant,java.time.Instant,java.util.function.Function)">FHIRPersistence</a></code></span></div>
<div class="block">Special function for high speed export of resource payloads. The process
 function must process the InputStream before returning. Result processing
 will be stopped if the process function returns Boolean FALSE.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#fetchResourcePayloads(java.lang.Class,java.time.Instant,java.time.Instant,java.util.function.Function)">fetchResourcePayloads</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resourceType</code> - the resource type which is the target of the search</dd>
<dd><code>fromLastModified</code> - start reading from this timestamp</dd>
<dd><code>toLastModified</code> - do not read beyond this timestamp</dd>
<dd><code>processor</code> - function to process each payload record</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the last ResourcePayload processed, or null if no data was found</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="changes(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.time.Instant,java.lang.Long,java.util.List,boolean,org.linuxforhealth.fhir.persistence.HistorySortOrder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changes</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../../ResourceChangeLogRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceChangeLogRecord</a>&gt;&nbsp;changes&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                       int&nbsp;resourceCount,
                                                       java.time.Instant&nbsp;sinceLastModified,
                                                       java.time.Instant&nbsp;beforeLastModified,
                                                       java.lang.Long&nbsp;changeIdMarker,
                                                       java.util.List&lt;java.lang.String&gt;&nbsp;resourceTypeNames,
                                                       boolean&nbsp;excludeTransactionTimeoutWindow,
                                                       <a href="../../HistorySortOrder.html" title="enum in org.linuxforhealth.fhir.persistence">HistorySortOrder</a>&nbsp;historySortOrder)
                                                throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#changes(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.time.Instant,java.lang.Long,java.util.List,boolean,org.linuxforhealth.fhir.persistence.HistorySortOrder)">FHIRPersistence</a></code></span></div>
<div class="block">Fetch up to resourceCount records from the RESOURCE_CHANGE_LOG table.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#changes(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.time.Instant,java.lang.Long,java.util.List,boolean,org.linuxforhealth.fhir.persistence.HistorySortOrder)">changes</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext associated with the current request</dd>
<dd><code>resourceCount</code> - the max number of resource change records to fetch</dd>
<dd><code>sinceLastModified</code> - filter records with record.lastUpdate >= sinceLastModified. Optional.</dd>
<dd><code>beforeLastModified</code> - filter records with record.lastUpdate <= beforeLastModified. Optional.</dd>
<dd><code>resourceTypeNames</code> - filter records matching any resource type name in the list</dd>
<dd><code>excludeTransactionTimeoutWindow</code> - flag to exclude resources falling inside server's tx timeout window</dd>
<dd><code>historySortOrder</code> - the type of sorting to apply</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list containing up to resourceCount elements describing resources which have changed</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="erase(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.persistence.erase.EraseDTO)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>erase</h4>
<pre class="methodSignature">public&nbsp;<a href="../../ResourceEraseRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceEraseRecord</a>&nbsp;erase&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                 <a href="../../erase/EraseDTO.html" title="class in org.linuxforhealth.fhir.persistence.erase">EraseDTO</a>&nbsp;eraseDto)
                          throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#erase(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.persistence.erase.EraseDTO)">FHIRPersistence</a></code></span></div>
<div class="block">Erases part or a whole of a resource in the data layer.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#erase(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,org.linuxforhealth.fhir.persistence.erase.EraseDTO)">erase</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext associated with this request</dd>
<dd><code>eraseDto</code> - the details of the user input</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a record indicating the success or partial success of the erase</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="retrieveIndex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.lang.Long,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveIndex</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;java.lang.Long&gt;&nbsp;retrieveIndex&#8203;(<a href="../../context/FHIRPersistenceContext.html" title="interface in org.linuxforhealth.fhir.persistence.context">FHIRPersistenceContext</a>&nbsp;context,
                                                    int&nbsp;count,
                                                    java.time.Instant&nbsp;notModifiedAfter,
                                                    java.lang.Long&nbsp;afterIndexId,
                                                    java.lang.String&nbsp;resourceTypeName)
                                             throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#retrieveIndex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.lang.Long,java.lang.String)">FHIRPersistence</a></code></span></div>
<div class="block">Retrieves a list of index IDs available for reindexing.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#retrieveIndex(org.linuxforhealth.fhir.persistence.context.FHIRPersistenceContext,int,java.time.Instant,java.lang.Long,java.lang.String)">retrieveIndex</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the FHIRPersistenceContext associated with this request</dd>
<dd><code>count</code> - the maximum nuber of index IDs to retrieve</dd>
<dd><code>notModifiedAfter</code> - only retrieve index IDs for resources not last updated after the specified timestamp</dd>
<dd><code>afterIndexId</code> - retrieve index IDs starting after this specified index ID, or null to start with first index ID</dd>
<dd><code>resourceTypeName</code> - the resource type of index IDs to return, or null</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>list of index IDs available for reindexing</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="isUpdateCreateEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUpdateCreateEnabled</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isUpdateCreateEnabled()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#isUpdateCreateEnabled()">FHIRPersistence</a></code></span></div>
<div class="block">Returns true iff the persistence layer implementation supports update/create and it has been
 configured in the persistence config.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#isUpdateCreateEnabled()">isUpdateCreateEnabled</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="storePayload(org.linuxforhealth.fhir.model.resource.Resource,java.lang.String,int,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storePayload</h4>
<pre class="methodSignature">public&nbsp;<a href="../../payload/PayloadPersistenceResponse.html" title="class in org.linuxforhealth.fhir.persistence.payload">PayloadPersistenceResponse</a>&nbsp;storePayload&#8203;(<a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&nbsp;resource,
                                               java.lang.String&nbsp;logicalId,
                                               int&nbsp;newVersionNumber,
                                               java.lang.String&nbsp;resourcePayloadKey)
                                        throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#storePayload(org.linuxforhealth.fhir.model.resource.Resource,java.lang.String,int,java.lang.String)">FHIRPersistence</a></code></span></div>
<div class="block">Offload payload storage to another provider. If result is not null, the returned
 <code>Future</code> can be used to obtain the status of the operation. If the result
 is null, then the implementation does not support offloading and the payload must
 be stored in the traditional manner (e.g. in the RDBMS). A <code>Future</code> is used
 because the offloading storage operation may be asynchronous. This Future must be
 resolved prior to the transaction commit.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#storePayload(org.linuxforhealth.fhir.model.resource.Resource,java.lang.String,int,java.lang.String)">storePayload</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
<a id="readResourcesForRecords(java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>readResourcesForRecords</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../../../model/resource/Resource.html" title="class in org.linuxforhealth.fhir.model.resource">Resource</a>&gt;&nbsp;readResourcesForRecords&#8203;(java.util.List&lt;<a href="../../ResourceChangeLogRecord.html" title="class in org.linuxforhealth.fhir.persistence">ResourceChangeLogRecord</a>&gt;&nbsp;records)
                                                 throws <a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../FHIRPersistence.html#readResourcesForRecords(java.util.List)">FHIRPersistence</a></code></span></div>
<div class="block">Read the resources for each of the change log records in the list, aligning
 the entries in the returned list to match the entries in the records list.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../FHIRPersistence.html#readResourcesForRecords(java.util.List)">readResourcesForRecords</a></code>&nbsp;in interface&nbsp;<code><a href="../../FHIRPersistence.html" title="interface in org.linuxforhealth.fhir.persistence">FHIRPersistence</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of Resources with the same number of entries as the given records list</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../exception/FHIRPersistenceException.html" title="class in org.linuxforhealth.fhir.persistence.exception">FHIRPersistenceException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FHIRPersistenceJDBCImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>LinuxForHealth</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../index.html?org/linuxforhealth/fhir/persistence/jdbc/impl/FHIRPersistenceJDBCImpl.html" target="_top">Frames</a></li>
<li><a href="FHIRPersistenceJDBCImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright 2019, 2022. <a href="http://www.ibm.com">IBM Corporation</a><br/>FHIR&reg; is the registered trademark of HL7 and is used with the permission of HL7.</small></p>
</footer>
</body>
</html>
