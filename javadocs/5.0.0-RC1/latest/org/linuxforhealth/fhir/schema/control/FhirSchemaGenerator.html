<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.16) on Thu Aug 18 14:57:40 UTC 2022 -->
<title>FhirSchemaGenerator (LinuxForHealth FHIR Server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-08-18">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FhirSchemaGenerator (LinuxForHealth FHIR Server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FhirSchemaGenerator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>LinuxForHealth</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../index.html?org/linuxforhealth/fhir/schema/control/FhirSchemaGenerator.html" target="_top">Frames</a></li>
<li><a href="FhirSchemaGenerator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.linuxforhealth.fhir.schema.control</a></div>
<h2 title="Class FhirSchemaGenerator" class="title">Class FhirSchemaGenerator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.linuxforhealth.fhir.schema.control.FhirSchemaGenerator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">FhirSchemaGenerator</span>
extends java.lang.Object</pre>
<div class="block">Encapsulates the generation of the FHIR schema artifacts</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ADMIN_GROUP">ADMIN_GROUP</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#FHIRDATA_GROUP">FHIRDATA_GROUP</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SCHEMA_GROUP_TAG">SCHEMA_GROUP_TAG</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.lang.String,org.linuxforhealth.fhir.database.utils.api.SchemaType)">FhirSchemaGenerator</a></span>&#8203;(java.lang.String&nbsp;adminSchemaName,
                   java.lang.String&nbsp;schemaName,
                   <a href="../../database/utils/api/SchemaType.html" title="enum in org.linuxforhealth.fhir.database.utils.api">SchemaType</a>&nbsp;schemaType)</code></th>
<td class="colLast">
<div class="block">Generate the IBM FHIR Server Schema for all resourceTypes</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.lang.String,org.linuxforhealth.fhir.database.utils.api.SchemaType,java.util.Set)">FhirSchemaGenerator</a></span>&#8203;(java.lang.String&nbsp;adminSchemaName,
                   java.lang.String&nbsp;schemaName,
                   <a href="../../database/utils/api/SchemaType.html" title="enum in org.linuxforhealth.fhir.database.utils.api">SchemaType</a>&nbsp;schemaType,
                   java.util.Set&lt;java.lang.String&gt;&nbsp;resourceTypes)</code></th>
<td class="colLast">
<div class="block">Generate the IBM FHIR Server Schema with just the given resourceTypes</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCodeSystems(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addCodeSystems</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Add the code_systems table to the database schema
    CREATE TABLE code_systems (
      code_system_id         INT NOT NULL
       CONSTRAINT pk_code_system PRIMARY KEY,
      code_system_name       VARCHAR(255 OCTETS) NOT NULL
    );

    CREATE UNIQUE INDEX unq_code_system_cinm ON code_systems(code_system_name);</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCommonCanonicalValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addCommonCanonicalValues</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Create the COMMON_CANONICAL_VALUES table.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCommonTokenValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addCommonTokenValues</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Adds the appropriate common_token_values table depending on the schema type</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCommonTokenValuesDistributed(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addCommonTokenValuesDistributed</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">The common_token_values definition used for the distributed (Citus) variant of the schema.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addCommonTokenValuesStandard(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addCommonTokenValuesStandard</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Table used to store normalized values for tokens, shared by all the
 <RESOURCE_TYPE>_TOKEN_VALUES tables.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addErasedResources(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addErasedResources</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">The erased_resources table is used to track which logical resources and corresponding
 resource versions have been erased using the $erase operation.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addFhirChangeSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addFhirChangeSequence</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Adds a new sequence required for distributed databases like Citus</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addFhirRefSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addFhirRefSequence</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addFhirSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addFhirSequence</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">
    CREATE SEQUENCE fhir_sequence
             AS BIGINT
     START WITH 1
          CACHE 20000
       NO CYCLE;</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLogicalResourceCompartments(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addLogicalResourceCompartments</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Adds the system level logical_resource_compartments table which identifies to
 which compartments a give resource belongs.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLogicalResourceProfiles(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addLogicalResourceProfiles</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">A single-parameter table supporting _profile search parameter values
 Add the LOGICAL_RESOURCE_PROFILES table to the given <a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model"><code>PhysicalDataModel</code></a>.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLogicalResources(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addLogicalResources</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add the system-wide logical_resources table.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLogicalResourceSecurity(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addLogicalResourceSecurity</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add the dedicated common_token_values mapping table for security search parameters</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addLogicalResourceTags(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addLogicalResourceTags</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">A single-parameter table supporting _tag search parameter values.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addParameterNames(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addParameterNames</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">CREATE TABLE parameter_names (
      parameter_name_id INT NOT NULL
                    CONSTRAINT pk_parameter_name PRIMARY KEY,
      parameter_name   VARCHAR(255 OCTETS) NOT NULL
    );

    CREATE UNIQUE INDEX unq_parameter_name_rtnm ON parameter_names(parameter_name) INCLUDE (parameter_name_id);</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addReferencesSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addReferencesSequence</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add the sequence used by the new local/external references data model</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceChangeLog(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addResourceChangeLog</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add the resource_change_log table.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceDateValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addResourceDateValues</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Add the table for data search parameters at the (system-wide) resource level</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceStrValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addResourceStrValues</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add system-wide RESOURCE_STR_VALUES table to support _profile
 properties (which are of type REFERENCE).</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceTables(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel,org.linuxforhealth.fhir.database.utils.model.IDatabaseObject...)">addResourceTables</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model,
                 <a href="../../database/utils/model/IDatabaseObject.html" title="interface in org.linuxforhealth.fhir.database.utils.model">IDatabaseObject</a>...&nbsp;dependency)</code></th>
<td class="colLast">
<div class="block">Add the collection of tables for each of the listed
 FHIR resource types</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code><a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceTokenRefs(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addResourceTokenRefs</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">Add the system-wide RESOURCE_TOKEN_REFS table which is used for
 _tag and _security search properties in R4 (new table
 for issue #1366 V0006 schema change).</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addResourceTypes(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addResourceTypes</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">
        CREATE TABLE resource_types (
            resource_type_id INT NOT NULL
            CONSTRAINT pk_resource_type PRIMARY KEY,
            resource_type   VARCHAR(64) NOT NULL
        );

        -- make sure resource_type values are unique
        CREATE UNIQUE INDEX unq_resource_types_rt ON resource_types(resource_type);</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addTenantKeysTable(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addTenantKeysTable</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Each tenant can have multiple access keys which are used to authenticate and authorize
 clients for access to the data for a given tenant.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addTenantSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addTenantSequence</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</code></th>
<td class="colLast">
<div class="block">
    CREATE SEQUENCE fhir_sequence
             AS BIGINT
     START WITH 1
          CACHE 1000
       NO CYCLE;</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addTenantTable(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">addTenantTable</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Create a table to manage the list of tenants.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../../database/utils/model/With.html" title="class in org.linuxforhealth.fhir.database.utils.model">With</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addWiths()">addWiths</a></span>()</code></th>
<td class="colLast">
<div class="block">The defaults with addWiths.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildAdminSchema(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">buildAdminSchema</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Build the admin part of the schema.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildDatabaseSpecificArtifactsCitus(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">buildDatabaseSpecificArtifactsCitus</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Add stored procedures/functions for Citus (largely based on PostgreSQL, but some functions are distributed
 based on a parameter to make them more efficient.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildDatabaseSpecificArtifactsPostgres(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">buildDatabaseSpecificArtifactsPostgres</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildSchema(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">buildSchema</a></span>&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Create the schema using the given target</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="SCHEMA_GROUP_TAG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SCHEMA_GROUP_TAG</h4>
<pre>public static final&nbsp;java.lang.String SCHEMA_GROUP_TAG</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.linuxforhealth.fhir.schema.control.FhirSchemaGenerator.SCHEMA_GROUP_TAG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="FHIRDATA_GROUP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FHIRDATA_GROUP</h4>
<pre>public static final&nbsp;java.lang.String FHIRDATA_GROUP</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.linuxforhealth.fhir.schema.control.FhirSchemaGenerator.FHIRDATA_GROUP">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ADMIN_GROUP">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ADMIN_GROUP</h4>
<pre>public static final&nbsp;java.lang.String ADMIN_GROUP</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.linuxforhealth.fhir.schema.control.FhirSchemaGenerator.ADMIN_GROUP">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.lang.String,java.lang.String,org.linuxforhealth.fhir.database.utils.api.SchemaType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FhirSchemaGenerator</h4>
<pre>public&nbsp;FhirSchemaGenerator&#8203;(java.lang.String&nbsp;adminSchemaName,
                           java.lang.String&nbsp;schemaName,
                           <a href="../../database/utils/api/SchemaType.html" title="enum in org.linuxforhealth.fhir.database.utils.api">SchemaType</a>&nbsp;schemaType)</pre>
<div class="block">Generate the IBM FHIR Server Schema for all resourceTypes</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>adminSchemaName</code> - </dd>
<dd><code>schemaName</code> - </dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.lang.String,org.linuxforhealth.fhir.database.utils.api.SchemaType,java.util.Set)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FhirSchemaGenerator</h4>
<pre>public&nbsp;FhirSchemaGenerator&#8203;(java.lang.String&nbsp;adminSchemaName,
                           java.lang.String&nbsp;schemaName,
                           <a href="../../database/utils/api/SchemaType.html" title="enum in org.linuxforhealth.fhir.database.utils.api">SchemaType</a>&nbsp;schemaType,
                           java.util.Set&lt;java.lang.String&gt;&nbsp;resourceTypes)</pre>
<div class="block">Generate the IBM FHIR Server Schema with just the given resourceTypes</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>adminSchemaName</code> - </dd>
<dd><code>schemaName</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="buildAdminSchema(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildAdminSchema</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;buildAdminSchema&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Build the admin part of the schema. One admin schema can support multiple FHIRDATA
 schemas. It is also possible to have multiple admin schemas (on a dev system,
 for example, although in production there would probably be just one admin schema
 in a given database</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addTenantTable(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTenantTable</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addTenantTable&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Create a table to manage the list of tenants. The tenant id is used
 as a partition value for all the other tables</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addTenantKeysTable(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTenantKeysTable</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addTenantKeysTable&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Each tenant can have multiple access keys which are used to authenticate and authorize
 clients for access to the data for a given tenant. We support multiple keys per tenant
 as a way to allow key rotation in the configuration without impacting service continuity</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addTenantSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTenantSequence</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addTenantSequence&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block"><pre>
    CREATE SEQUENCE fhir_sequence
             AS BIGINT
     START WITH 1
          CACHE 1000
       NO CYCLE;
     </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="buildSchema(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildSchema</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;buildSchema&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Create the schema using the given target</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="buildDatabaseSpecificArtifactsPostgres(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildDatabaseSpecificArtifactsPostgres</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;buildDatabaseSpecificArtifactsPostgres&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
</li>
</ul>
<a id="buildDatabaseSpecificArtifactsCitus(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildDatabaseSpecificArtifactsCitus</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;buildDatabaseSpecificArtifactsCitus&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Add stored procedures/functions for Citus (largely based on PostgreSQL, but some functions are distributed
 based on a parameter to make them more efficient.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addLogicalResources(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLogicalResources</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addLogicalResources&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add the system-wide logical_resources table. Note that LOGICAL_ID is
 denormalized, stored in both LOGICAL_RESOURCES and <RESOURCE_TYPE>_LOGICAL_RESOURCES.
 This avoids an additional join, and simplifies the migration to this
 new schema model.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addCommonCanonicalValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommonCanonicalValues</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addCommonCanonicalValues&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Create the COMMON_CANONICAL_VALUES table. Used from schema V0014 to normalize
 meta.profile search parameters (similar to common_token_values). Only the url
 is included by design. The (optional) version and fragment values are stored
 in the parameter mapping table (logical_resource_profiles) in order to support
 inequalities on version while still using a literal CANONICAL_ID = x predicate.
 These canonical ids are cached in the server, so search queries won't need to
 join to this table. The URL is typically a long string, so by normalizing and
 storing/indexing it once, we reduce space consumption.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addLogicalResourceProfiles(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLogicalResourceProfiles</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addLogicalResourceProfiles&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">A single-parameter table supporting _profile search parameter values
 Add the LOGICAL_RESOURCE_PROFILES table to the given <a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model"><code>PhysicalDataModel</code></a>.
 This table maps logical resources to meta.profile values stored as canonical URIs
 in COMMON_CANONICAL_VALUES. Canonical values can include optional version and fragment
 values as described here: https://www.hl7.org/fhir/datatypes.html#canonical</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="addLogicalResourceTags(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLogicalResourceTags</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addLogicalResourceTags&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">A single-parameter table supporting _tag search parameter values.
 Tags are tokens, but because they may not be very selective we use a
 separate table in order to avoid messing up cardinality estimates
 in the query optimizer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="addLogicalResourceSecurity(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLogicalResourceSecurity</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addLogicalResourceSecurity&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add the dedicated common_token_values mapping table for security search parameters</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a id="addResourceChangeLog(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceChangeLog</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addResourceChangeLog&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add the resource_change_log table. This table supports tracking of every change made
 to a resource at the global level, making it much easier to stream a list of changes
 from a known point.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addLogicalResourceCompartments(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLogicalResourceCompartments</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addLogicalResourceCompartments&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Adds the system level logical_resource_compartments table which identifies to
 which compartments a give resource belongs. A resource may belong to many
 compartments.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Table the table that was added to the PhysicalDataModel</dd>
</dl>
</li>
</ul>
<a id="addResourceStrValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceStrValues</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addResourceStrValues&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add system-wide RESOURCE_STR_VALUES table to support _profile
 properties (which are of type REFERENCE).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Table the table that was added to the PhysicalDataModel</dd>
</dl>
</li>
</ul>
<a id="addResourceDateValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceDateValues</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addResourceDateValues&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Add the table for data search parameters at the (system-wide) resource level</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Table the table that was added to the PhysicalDataModel</dd>
</dl>
</li>
</ul>
<a id="addResourceTypes(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceTypes</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addResourceTypes&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block"><pre>
        CREATE TABLE resource_types (
            resource_type_id INT NOT NULL
            CONSTRAINT pk_resource_type PRIMARY KEY,
            resource_type   VARCHAR(64) NOT NULL
        );

        -- make sure resource_type values are unique
        CREATE UNIQUE INDEX unq_resource_types_rt ON resource_types(resource_type);
        </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addResourceTables(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel,org.linuxforhealth.fhir.database.utils.model.IDatabaseObject...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceTables</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addResourceTables&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model,
                                 <a href="../../database/utils/model/IDatabaseObject.html" title="interface in org.linuxforhealth.fhir.database.utils.model">IDatabaseObject</a>...&nbsp;dependency)</pre>
<div class="block">Add the collection of tables for each of the listed
 FHIR resource types</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addParameterNames(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addParameterNames</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addParameterNames&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">CREATE TABLE parameter_names (
      parameter_name_id INT NOT NULL
                    CONSTRAINT pk_parameter_name PRIMARY KEY,
      parameter_name   VARCHAR(255 OCTETS) NOT NULL
    );

    CREATE UNIQUE INDEX unq_parameter_name_rtnm ON parameter_names(parameter_name) INCLUDE (parameter_name_id);</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addCodeSystems(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCodeSystems</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addCodeSystems&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;model)</pre>
<div class="block">Add the code_systems table to the database schema
    CREATE TABLE code_systems (
      code_system_id         INT NOT NULL
       CONSTRAINT pk_code_system PRIMARY KEY,
      code_system_name       VARCHAR(255 OCTETS) NOT NULL
    );

    CREATE UNIQUE INDEX unq_code_system_cinm ON code_systems(code_system_name);</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - </dd>
</dl>
</li>
</ul>
<a id="addCommonTokenValues(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommonTokenValues</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addCommonTokenValues&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Adds the appropriate common_token_values table depending on the schema type</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addCommonTokenValuesStandard(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommonTokenValuesStandard</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addCommonTokenValuesStandard&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Table used to store normalized values for tokens, shared by all the
 <RESOURCE_TYPE>_TOKEN_VALUES tables. Although this requires an additional
 join, it cuts down on space by avoiding repeating long strings (e.g. urls).
 This also helps to reduce the total sizes of the indexes, helping to improve
 cache hit rates for a given buffer cache size.
 Token values may or may not have an associated code system, in which case,
 it assigned a default system. This is why CODE_SYSTEM_ID is not nullable and
 has a FK constraint.

 We never need to find all token values for a given code-system, so there's no need
 for a second index (CODE_SYSTEM_ID, TOKEN_VALUE). Do not add it.

 Because different parameter names may reference the same token value (e.g.
 'Observation.subject' and 'Claim.patient' are both patient references), the
 common token value is not distinguished by a parameter_name_id.

 From V0027, token values are no longer used to represent relationships between resources.

 When using a distributed database (Citus), this table is distributed as a REFERENCE
 table, meaning that all records will exist on all nodes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addCommonTokenValuesDistributed(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommonTokenValuesDistributed</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addCommonTokenValuesDistributed&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">The common_token_values definition used for the distributed (Citus) variant of the schema.
 Because this table may contain one or more values per resource (e.g. identifier), we
 need to distribute it somehow.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#addCommonTokenValuesStandard(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)"><code>addCommonTokenValuesStandard(PhysicalDataModel)</code></a></dd>
</dl>
</li>
</ul>
<a id="addResourceTokenRefs(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResourceTokenRefs</h4>
<pre class="methodSignature">public&nbsp;<a href="../../database/utils/model/Table.html" title="class in org.linuxforhealth.fhir.database.utils.model">Table</a>&nbsp;addResourceTokenRefs&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add the system-wide RESOURCE_TOKEN_REFS table which is used for
 _tag and _security search properties in R4 (new table
 for issue #1366 V0006 schema change). Replaces the
 previous TOKEN_VALUES table. All token values are now
 normalized in the COMMON_TOKEN_VALUES table. Because this
 is for system-level params, there's no need to support
 composite params</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Table the table that was added to the PhysicalDataModel</dd>
</dl>
</li>
</ul>
<a id="addErasedResources(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addErasedResources</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;addErasedResources&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">The erased_resources table is used to track which logical resources and corresponding
 resource versions have been erased using the $erase operation. This table should
 typically be empty and only used temporarily by the erase DAO/procedures to indicate
 which rows have been erased. The entries in this table are then used to delete
 any offloaded payload entries.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addFhirSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addFhirSequence</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addFhirSequence&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block"><pre>
    CREATE SEQUENCE fhir_sequence
             AS BIGINT
     START WITH 1
          CACHE 20000
       NO CYCLE;
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addFhirChangeSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addFhirChangeSequence</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addFhirChangeSequence&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Adds a new sequence required for distributed databases like Citus</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addFhirRefSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addFhirRefSequence</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addFhirRefSequence&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
</li>
</ul>
<a id="addReferencesSequence(org.linuxforhealth.fhir.database.utils.model.PhysicalDataModel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addReferencesSequence</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;addReferencesSequence&#8203;(<a href="../../database/utils/model/PhysicalDataModel.html" title="class in org.linuxforhealth.fhir.database.utils.model">PhysicalDataModel</a>&nbsp;pdm)</pre>
<div class="block">Add the sequence used by the new local/external references data model</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pdm</code> - </dd>
</dl>
</li>
</ul>
<a id="addWiths()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>addWiths</h4>
<pre class="methodSignature">protected&nbsp;java.util.List&lt;<a href="../../database/utils/model/With.html" title="class in org.linuxforhealth.fhir.database.utils.model">With</a>&gt;&nbsp;addWiths()</pre>
<div class="block">The defaults with addWiths. Added to every table in a PostgreSQL schema</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FhirSchemaGenerator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><a href="/FHIR" class="bx--header__name" target="_parent"><span>LinuxForHealth</span>&nbsp;FHIRÂ®&nbsp;Server</a></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../index.html?org/linuxforhealth/fhir/schema/control/FhirSchemaGenerator.html" target="_top">Frames</a></li>
<li><a href="FhirSchemaGenerator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright 2019, 2022. <a href="http://www.ibm.com">IBM Corporation</a><br/>FHIR&reg; is the registered trademark of HL7 and is used with the permission of HL7.</small></p>
</footer>
</body>
</html>
