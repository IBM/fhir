(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{T4xc:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return b})),n.d(t,"default",(function(){return p}));n("tkto"),n("yXV3"),n("pNMO"),n("zKZe"),n("q1tI");var o=n("7ljp"),r=n("013z"),a=(n("qKvR"),["components"]);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b={},i={_frontmatter:b},s=r.a;function p(e){var t=e.components,n=c(e,a);return Object(o.b)(s,l({},i,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The IBM FHIR Server - Must-Gather Information"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Which environment did the problem occur in?\na. Kubernetes Version (IKS, ROKS)\nb. If not one of the standard environments,\nPlease indicate the Operating System and java version in use\nOS:  Windows/Linux/Mac\nJava: (output of “java -fullversion”)\nc. The IBM FHIR Version\nd. Docker Version")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Describe the problem as clearly as you can. Be sure to include:\na. Steps to reproduce the problem\nb. The actual REST API URL strings (rather than placeholders copied from a test plan, etc.)\ne.g. https://hostname/fhir-server/api/v4\nOnly provide as appropriate for sharing publically."),Object(o.b)("p",{parentName:"li"},"c. Full stacktraces (include all “caused by” clauses)\nd. The error messages from liberty’s messages.log file that are related to the problem\ne. Contents of any applicable FHIR resources (avoid PHI)"),Object(o.b)("p",{parentName:"li"},"Note: As part of an error response, the IBM FHIR Server typically returns\nan OperationOutcome in the HTTP response, and the error message contains\na “probeId=xxx” value.   You can search for this probeId value within the messages.log\nand/or trace.log to find the matching server-side messages related to the problem.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"If possible, please include a trace.log (or snippet) which shows the server activity when the problem occurred.\nThe liberty “traceSpecification” string should include ",Object(o.b)("inlineCode",{parentName:"p"},"org.linuxforhealth.fhir.*=fine")))),Object(o.b)("h1",null,"Gathering logs on Red Hat OpenShift"),Object(o.b)("p",null,"To help IBM Support troubleshoot any issues with your ",Object(o.b)("em",{parentName:"p"},"IBM FHIR Server instance")," on OpenShift, use the ",Object(o.b)("inlineCode",{parentName:"p"},"oc adm must-gather")," command to capture the must gather logs. The logs are stored in a folder in the current working directory."),Object(o.b)("p",null,"To gather diagnostic logs, run the following commands as Cluster Administrator and replace ",Object(o.b)("inlineCode",{parentName:"p"},"YOUR_NAMESPACE")," with your namespace that the IBM FHIR Server and the IBM FHIR Server Schematool is running."),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the oc CLI.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Provide the output of the OpenShift version."))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc version > version.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Provide the output of the Kubectl version.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"kubectl version >> version.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collection information about the nodes.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc get nodes -o wide -n YOUR_NAMESPACE > nodes.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collect information about the pod statuses")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc get pods -n YOUR_NAMESPACE > pods.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collect information about the pod containers")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'oc get pods -o jsonpath="{..image}"  -n YOUR_NAMESPACE > containerInfo.txt\n')),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collect the defined secrets")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc get secrets  -n YOUR_NAMESPACE > secrets.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collect the defined persistent volume claims")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc get pvc -n YOUR_NAMESPACE > pvcs.txt\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Collect the description and log of any pod you are having issues with:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc describe pod YOUR_POD_NAME -n YOUR_NAMESPACE > describe-YOUR_POD_NAME.txt\noc logs YOUR_POD_NAME -n YOUR_NAMESPACE > log-YOUR_POD_NAME.log\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"The oc adm must-gather CLI command collects the information from your cluster that is most likely needed for debugging issues, such as:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc adm must-gather\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"To obtain your cluster ID using the OpenShift CLI (oc), run the following command:")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc get clusterversion -o jsonpath='{.items[].spec.clusterID}{\"\\n\"}'\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Provide the Custom Resource(CR) .yaml file used by the operator to configure the environment")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"kubectl get YOUR_CONFIG -o yaml > config.yaml\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Obtain detailed description of a pod")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc describe pod -n YOUR_NAMESPACE POD_NAME &> POD_NAME_describe.log\n")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Run the oc adm inspect")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc adm inspect\n")),Object(o.b)("p",null,"Executing commands/bash shell inside a pod:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"oc exec [flags] -n YOUR_NAMESPACE POD [-c CONTAINER] -- COMMAND [args...]\n")),Object(o.b)("p",null,"Example: to run a bash shell within the pod and tail the liberty messages.log:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"     oc exec -ti  ibmfhirserver-as6jql -- /bin/bash \n     bash-4.2$ tail -f /logs/messages.log \n")),Object(o.b)("p",null,"Provide the data to your support team. Note, please review and redact any sensistive data before posting in any issue."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-must-gather-md-9bd2c88023d2a92fddf8.js.map